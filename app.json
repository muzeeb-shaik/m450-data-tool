[{"name":"app.R","content":"##############################################\n# M450 Data Analysis Tool - IU / Shinylive\n##############################################\n\nlibrary(shiny)\nlibrary(DT)\nlibrary(broom)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(rlang)\n\n# ==============================================================================\n# HELPER FUNCTIONS\n# ==============================================================================\n\n# Custom Skewness function\nskewness <- function(x, na.rm = FALSE) {\n  if (na.rm) x <- x[!is.na(x)]\n  n <- length(x)\n  if (n < 3) return(NA)\n  x <- x - mean(x)\n  y <- sqrt(mean(x^2))\n  sum(x^3) / (n * y^3)\n}\n\n# Custom Kurtosis function\nkurtosis <- function(x, na.rm = FALSE) {\n  if (na.rm) x <- x[!is.na(x)]\n  n <- length(x)\n  if (n < 4) return(NA)\n  x <- x - mean(x)\n  y <- mean(x^2)\n  (sum(x^4) / (n * y^2)) - 3\n}\n\n# DT Options Helper (updated: length menu + export-all buttons; default DOM includes 'l')\nget_dt_options <- function(scrollX = TRUE, dom = \"lBfrtip\", pageLength = 5) {\n  list(\n    scrollX = scrollX,\n    dom = dom,\n    pageLength = pageLength,\n    lengthMenu = list(\n      c(5, 10, 15, 25, 50, -1),\n      c(\"5\", \"10\", \"15\", \"25\", \"50\", \"All\")\n    ),\n    buttons = list(\n      list(\n        extend = \"copy\",\n        text = \"Copy\",\n        exportOptions = list(modifier = list(page = \"all\"))\n      ),\n      list(\n        extend = \"csv\",\n        text = \"CSV\",\n        exportOptions = list(modifier = list(page = \"all\"))\n      )\n    )\n  )\n}\n\n# ==============================================================================\n# MODULE: DATA FILTERING\n# ==============================================================================\n\nfilter_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Filter Data\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"filter_var_selector\")),\n        selectInput(ns(\"filter_op\"), \"Operator\",\n                    choices = c(\"Equals (==)\" = \"==\",\n                                \"Not Equals (!=)\" = \"!=\",\n                                \"Greater Than (>)\" = \">\",\n                                \"Less Than (<)\" = \"<\",\n                                \"Greater/Equal (>=)\" = \">=\",\n                                \"Less/Equal (<=)\" = \"<=\")),\n        textInput(ns(\"filter_val\"), \"Value (Enter number or text)\"),\n        actionButton(ns(\"apply_filter\"), \"Apply Filter\", class = \"btn-danger w-100\"),\n        hr(),\n        actionButton(ns(\"reset_data\"), \"Reset to Original Data\", class = \"btn-secondary w-100\")\n      ),\n      h5(\"Current Data Preview (First 10 Rows)\"),\n      p(class=\"text-muted\", \"Note: Filtering modifies the dataset used in all modules.\"),\n      DTOutput(ns(\"filter_preview\"))\n    )\n  )\n}\n\nfilter_server <- function(id, data_reactive, original_data_reactive, update_data_function) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$filter_var_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"filter_var\"), \"Select Variable to Filter\", choices = names(data_reactive()))\n    })\n\n    output$filter_preview <- renderDT({\n      req(data_reactive())\n      datatable(head(data_reactive(), 10),\n                extensions = \"Buttons\",\n                options = get_dt_options(dom = \"lBfrtip\"))\n    })\n\n    # APPLY FILTER\n    observeEvent(input$apply_filter, {\n      req(data_reactive(), input$filter_var, input$filter_op, input$filter_val)\n      df <- data_reactive()\n      var <- input$filter_var\n      op <- input$filter_op\n      val <- input$filter_val\n\n      tryCatch({\n        if (is.numeric(df[[var]])) {\n          val_numeric <- as.numeric(val)\n          if (is.na(val_numeric)) stop(\"Please enter a numeric value for this variable.\")\n          expr <- paste0(\"`\", var, \"` \", op, \" \", val_numeric)\n        } else {\n          if (op %in% c(\">\", \"<\", \">=\", \"<=\")) stop(\"Cannot use inequalities on text data.\")\n          expr <- paste0(\"`\", var, \"` \", op, \" '\", val, \"'\")\n        }\n\n        filtered_df <- df %>% dplyr::filter(eval(parse(text = expr)))\n\n        if (nrow(filtered_df) == 0) {\n          showNotification(\"Filter resulted in 0 rows! Operation cancelled.\", type = \"warning\")\n        } else {\n          update_data_function(filtered_df)\n          showNotification(paste(\"Filter applied. Remaining rows:\", nrow(filtered_df)), type = \"message\")\n        }\n      }, error = function(e) {\n        showNotification(paste(\"Filter Error:\", e$message), type = \"error\")\n      })\n    })\n\n    # RESET DATA\n    observeEvent(input$reset_data, {\n      req(original_data_reactive())\n      update_data_function(original_data_reactive())\n      showNotification(\"Data reset to original uploaded file.\", type = \"message\")\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: DATA TRANSFORMATION\n# ==============================================================================\n\ntransform_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Data Transformation\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"var_selector\")),\n        selectInput(ns(\"method\"), \"Transformation Method\",\n                    choices = c(\"Log (ln)\" = \"log\",\n                                \"Square Root\" = \"sqrt\",\n                                \"Square (x^2)\" = \"square\",\n                                \"Standardize (Z-score)\" = \"scale\",\n                                \"Convert to Factor\" = \"factor\",\n                                \"Change Base Level (Relevel)\" = \"relevel\",\n                                \"Create Interaction (*)\" = \"interaction\")),\n\n        uiOutput(ns(\"var2_selector\")),\n        uiOutput(ns(\"level_selector\")),\n\n        actionButton(ns(\"apply\"), \"Apply Transformation\", class = \"btn-warning w-100\")\n      ),\n      h5(\"Data Preview (First 10 Rows)\"),\n      DTOutput(ns(\"preview_table\"))\n    )\n  )\n}\n\ntransform_server <- function(id, data_reactive, update_data_function) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$var_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"var\"), \"Select Variable\", choices = names(data_reactive()))\n    })\n\n    output$var2_selector <- renderUI({\n      req(input$method)\n      if (input$method == \"interaction\") {\n        req(data_reactive())\n        selectInput(ns(\"var2\"), \"Select Second Variable (Interaction)\", choices = names(data_reactive()))\n      } else {\n        NULL\n      }\n    })\n\n    output$level_selector <- renderUI({\n      req(input$method, input$var, data_reactive())\n      if (input$method == \"relevel\") {\n        df <- data_reactive()\n        col <- input$var\n\n        if (is.factor(df[[col]])) {\n          lvls <- levels(df[[col]])\n        } else {\n          lvls <- sort(unique(df[[col]]))\n        }\n\n        selectInput(ns(\"ref_level\"), \"Select New Reference Level\", choices = lvls)\n      } else {\n        NULL\n      }\n    })\n\n    output$preview_table <- renderDT({\n      req(data_reactive())\n      datatable(head(data_reactive(), 10),\n                extensions = \"Buttons\",\n                options = get_dt_options(dom = \"lBfrtip\"))\n    })\n\n    observeEvent(input$apply, {\n      req(data_reactive(), input$var)\n      df <- data_reactive()\n      col <- input$var\n      method <- input$method\n\n      tryCatch({\n        if (method == \"interaction\") {\n          req(input$var2)\n          col2 <- input$var2\n          if (!is.numeric(df[[col]]) || !is.numeric(df[[col2]]))\n            stop(\"Interaction requires both variables to be numeric.\")\n\n          new_col_name <- paste0(col, \"_x_\", col2)\n          df[[new_col_name]] <- df[[col]] * df[[col2]]\n          showNotification(paste(\"Created variable:\", new_col_name), type = \"message\")\n\n        } else if (method == \"relevel\") {\n          req(input$ref_level)\n\n          if (!is.factor(df[[col]])) {\n            df[[col]] <- as.factor(df[[col]])\n          }\n\n          df[[col]] <- relevel(df[[col]], ref = input$ref_level)\n          showNotification(paste(\"Variable\", col, \"releveled. Base case:\", input$ref_level), type = \"message\")\n\n        } else {\n          new_col_name <- paste0(col, \"_\", method)\n\n          if (method == \"log\") {\n            if (!is.numeric(df[[col]])) stop(\"Log requires numeric data.\")\n            df[[new_col_name]] <- log(df[[col]] + 1e-6)\n          } else if (method == \"sqrt\") {\n            if (!is.numeric(df[[col]])) stop(\"Sqrt requires numeric data.\")\n            df[[new_col_name]] <- sqrt(df[[col]])\n          } else if (method == \"square\") {\n            if (!is.numeric(df[[col]])) stop(\"Square requires numeric data.\")\n            df[[new_col_name]] <- df[[col]]^2\n          } else if (method == \"scale\") {\n            if (!is.numeric(df[[col]])) stop(\"Scale requires numeric data.\")\n            df[[new_col_name]] <- as.vector(scale(df[[col]]))\n          } else if (method == \"factor\") {\n            df[[col]] <- as.factor(df[[col]])\n            showNotification(paste(\"Converted\", col, \"to factor.\"), type = \"message\")\n            update_data_function(df)\n            return()\n          }\n\n          showNotification(paste(\"Created variable:\", new_col_name), type = \"message\")\n        }\n\n        update_data_function(df)\n\n      }, error = function(e) {\n        showNotification(paste(\"Error:\", e$message), type = \"error\")\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: SUMMARY STATS & DISTRIBUTIONS\n# ==============================================================================\n\nsummary_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Summary Statistics & Distributions\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"var_selector\")),\n        uiOutput(ns(\"group_selector\")),\n        checkboxGroupInput(ns(\"stats\"), \"Numeric Stats\",\n                           choices = c(\"N\", \"Mean\", \"SD\", \"Min\", \"Max\",\n                                       \"Median\", \"Skewness\", \"Kurtosis\"),\n                           selected = c(\"N\", \"Mean\", \"SD\", \"Min\", \"Max\"))\n      ),\n      card(\n        card_header(\"Output\"),\n        uiOutput(ns(\"dynamic_content\"))\n      )\n    )\n  )\n}\n\nsummary_server <- function(id, data_reactive) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$var_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"vars\"), \"Select Variables\",\n                     choices = names(data_reactive()), multiple = TRUE)\n    })\n\n    output$group_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"group_var\"), \"Group By (Optional)\",\n                     choices = c(\"None\" = \"\", names(data_reactive())),\n                     multiple = FALSE)\n    })\n\n    output$dynamic_content <- renderUI({\n      req(data_reactive(), input$vars)\n      df <- data_reactive()\n      selected_vars <- input$vars\n\n      num_vars <- names(df)[sapply(df, is.numeric)]\n      selected_num <- intersect(selected_vars, num_vars)\n      selected_cat <- setdiff(selected_vars, num_vars)\n\n      ui_list <- list()\n\n      if (length(selected_num) > 0) {\n        ui_list[[length(ui_list) + 1]] <- h5(\"Numeric Summary Statistics\")\n        ui_list[[length(ui_list) + 1]] <- DTOutput(ns(\"stats_table\"))\n      }\n\n      if (length(selected_cat) > 0) {\n        if (length(ui_list) > 0) ui_list[[length(ui_list) + 1]] <- hr()\n        ui_list[[length(ui_list) + 1]] <- h5(\"Categorical Distributions\")\n        for (v in selected_cat) {\n          ui_list[[length(ui_list) + 1]] <- h6(paste(\"Distribution:\", v))\n          ui_list[[length(ui_list) + 1]] <- plotOutput(ns(paste0(\"plot_\", v)))\n          ui_list[[length(ui_list) + 1]] <- br()\n        }\n      }\n\n      tagList(ui_list)\n    })\n\n    output$stats_table <- renderDT({\n      req(data_reactive(), input$vars)\n      df <- data_reactive()\n      group_var <- input$group_var\n      if (is.null(group_var) || group_var == \"\") group_var <- NULL\n\n      num_vars <- names(df)[sapply(df, is.numeric)]\n      selected_num <- intersect(input$vars, num_vars)\n      if (length(selected_num) == 0) return(NULL)\n\n      if (!is.null(group_var)) {\n        df_long <- df %>%\n          select(all_of(c(group_var, selected_num))) %>%\n          pivot_longer(cols = all_of(selected_num),\n                       names_to = \"Variable\", values_to = \"Value\") %>%\n          group_by(across(all_of(c(group_var, \"Variable\"))))\n\n        res <- df_long %>%\n          summarise(\n            N = if (\"N\" %in% input$stats) sum(!is.na(Value)) else NULL,\n            Mean = if (\"Mean\" %in% input$stats) mean(Value, na.rm = TRUE) else NULL,\n            SD = if (\"SD\" %in% input$stats) sd(Value, na.rm = TRUE) else NULL,\n            Min = if (\"Min\" %in% input$stats) min(Value, na.rm = TRUE) else NULL,\n            Max = if (\"Max\" %in% input$stats) max(Value, na.rm = TRUE) else NULL,\n            Median = if (\"Median\" %in% input$stats) median(Value, na.rm = TRUE) else NULL,\n            Skewness = if (\"Skewness\" %in% input$stats) skewness(Value, na.rm = TRUE) else NULL,\n            Kurtosis = if (\"Kurtosis\" %in% input$stats) kurtosis(Value, na.rm = TRUE) else NULL,\n            .groups = \"drop\"\n          ) %>%\n          mutate(across(where(is.numeric), ~ round(., 3)))\n\n        datatable(res, extensions = \"Buttons\", options = get_dt_options(dom = \"lBfrtip\"))\n      } else {\n        df_long <- df %>%\n          select(all_of(selected_num)) %>%\n          pivot_longer(cols = everything(),\n                       names_to = \"Variable\", values_to = \"Value\") %>%\n          group_by(Variable)\n\n        res <- df_long %>%\n          summarise(\n            N = if (\"N\" %in% input$stats) sum(!is.na(Value)) else NULL,\n            Mean = if (\"Mean\" %in% input$stats) mean(Value, na.rm = TRUE) else NULL,\n            SD = if (\"SD\" %in% input$stats) sd(Value, na.rm = TRUE) else NULL,\n            Min = if (\"Min\" %in% input$stats) min(Value, na.rm = TRUE) else NULL,\n            Max = if (\"Max\" %in% input$stats) max(Value, na.rm = TRUE) else NULL,\n            Median = if (\"Median\" %in% input$stats) median(Value, na.rm = TRUE) else NULL,\n            Skewness = if (\"Skewness\" %in% input$stats) skewness(Value, na.rm = TRUE) else NULL,\n            Kurtosis = if (\"Kurtosis\" %in% input$stats) kurtosis(Value, na.rm = TRUE) else NULL\n          ) %>%\n          mutate(across(where(is.numeric), ~ round(., 3)))\n\n        datatable(res, extensions = \"Buttons\", options = get_dt_options(dom = \"lBfrtip\"))\n      }\n    })\n\n    # Categorical plots\n    observe({\n      req(data_reactive(), input$vars)\n      df <- data_reactive()\n      cat_vars <- names(df)[!sapply(df, is.numeric)]\n      selected_cat <- intersect(input$vars, cat_vars)\n      group_var <- input$group_var\n      if (!is.null(group_var) && group_var == \"\") group_var <- NULL\n\n      for (v in selected_cat) {\n        local({\n          my_v <- v\n          output[[paste0(\"plot_\", my_v)]] <- renderPlot({\n            p <- ggplot(df, aes_string(x = paste0(\"`\", my_v, \"`\")))\n\n            if (!is.null(group_var)) {\n              p <- p +\n                geom_bar(aes_string(fill = paste0(\"`\", group_var, \"`\")),\n                         position = \"dodge\", color = \"black\") +\n                geom_text(stat = \"count\",\n                          aes(label = ..count..,\n                              group = !!sym(group_var)),\n                          position = position_dodge(width = 0.9),\n                          vjust = -0.5) +\n                labs(fill = group_var)\n            } else {\n              p <- p +\n                geom_bar(fill = \"#990000\", color = \"black\") +\n                geom_text(stat = \"count\", aes(label = ..count..), vjust = -0.5)\n            }\n\n            p +\n              theme_minimal() +\n              labs(y = \"Count\", title = NULL) +\n              theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n              scale_y_continuous(expand = expansion(mult = c(0, 0.15)))\n          })\n        })\n      }\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: CORRELATION (NUMERIC TABLE)\n# ==============================================================================\n\ncorr_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Correlation Analysis (Numeric Table)\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"num_var_selector\")),\n        actionButton(ns(\"run_corr\"), \"Calculate Correlations\", class = \"btn-primary w-100\")\n      ),\n      DTOutput(ns(\"corr_table\"))\n    )\n  )\n}\n\ncorr_server <- function(id, data_reactive) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$num_var_selector <- renderUI({\n      req(data_reactive())\n      num_vars <- names(data_reactive())[sapply(data_reactive(), is.numeric)]\n      selectizeInput(ns(\"vars\"), \"Select Numeric Variables\",\n                     choices = num_vars, multiple = TRUE, selected = NULL)\n    })\n\n    observeEvent(input$run_corr, {\n      req(data_reactive(), input$vars)\n      df_num <- data_reactive()[, input$vars, drop = FALSE]\n\n      M <- cor(df_num, use = \"complete.obs\")\n      M_rounded <- round(M, 3)\n\n      output$corr_table <- renderDT({\n        datatable(M_rounded, extensions = \"Buttons\",\n                  options = get_dt_options(dom = \"lBfrtip\")) %>%\n          formatStyle(columns = colnames(M_rounded),\n                      backgroundColor = styleInterval(\n                        c(-0.5, 0.5),\n                        c(\"#f8d7da\", \"#ffffff\", \"#d4edda\")\n                      ))\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: CLUSTER ANALYSIS (K-MEANS, NO factoextra/cluster PACKAGE)\n# ==============================================================================\n\ncluster_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Cluster Analysis (K-Means)\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"col_selector\")),\n        actionButton(ns(\"run_diagnostics\"), \"Generate Diagnostics (Elbow/Dendrogram)\",\n                     class = \"btn-info w-100 mb-3\", icon = icon(\"chart-area\")),\n        hr(),\n        numericInput(ns(\"k\"), \"Number of Clusters (k)\", value = 2, min = 1),\n        actionButton(ns(\"run_cluster\"), \"Run Clustering & Save\",\n                     class = \"btn-success w-100\", icon = icon(\"save\")),\n        p(class=\"text-muted small mt-2\",\n          \"Note: 'Run Clustering' will add a 'Cluster_Membership' variable to your dataset.\")\n      ),\n      navset_card_tab(\n        nav_panel(\"Elbow Plot\", plotOutput(ns(\"elbow_plot\"))),\n        nav_panel(\"Dendrogram\", plotOutput(ns(\"dendrogram\"))),\n        nav_panel(\"Cluster Summary\", DTOutput(ns(\"cluster_summary\")))\n      )\n    )\n  )\n}\n\ncluster_server <- function(id, data_reactive, update_data_function) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$col_selector <- renderUI({\n      req(data_reactive())\n      num_vars <- names(data_reactive())[sapply(data_reactive(), is.numeric)]\n      checkboxGroupInput(ns(\"cols\"), \"Select Variables for Clustering\",\n                         choices = num_vars, selected = NULL)\n    })\n\n    clean_data <- reactive({\n      req(data_reactive(), input$cols)\n      data_reactive()[, input$cols, drop = FALSE] %>% na.omit()\n    })\n\n    scaled_data <- reactive({\n      req(clean_data())\n      scale(clean_data())\n    })\n\n    observeEvent(input$run_diagnostics, {\n      req(scaled_data())\n\n      output$elbow_plot <- renderPlot({\n        data_for_k <- scaled_data()\n        max_k <- min(10, nrow(data_for_k) - 1)\n        if (max_k < 2) {\n          plot.new()\n          title(\"Not enough rows for elbow plot\")\n        } else {\n          wss <- sapply(1:max_k, function(k) {\n            kmeans(data_for_k, centers = k, nstart = 10)$tot.withinss\n          })\n          plot(\n            1:max_k, wss, type = \"b\",\n            xlab = \"Number of clusters (k)\",\n            ylab = \"Total within-cluster sum of squares\",\n            main = \"Elbow Method for Choosing k\"\n          )\n        }\n      })\n\n      output$dendrogram <- renderPlot({\n        data_for_tree <- scaled_data()\n\n        # Limit dendrogram computation to prevent memory issues\n        max_rows <- min(100, nrow(data_for_tree))\n\n        if (nrow(data_for_tree) > max_rows) {\n          set.seed(42)\n          data_for_tree <- data_for_tree[sample(1:nrow(data_for_tree), max_rows), ]\n        }\n\n        # Skip dendrogram if still too large\n        if (nrow(data_for_tree) < 2) {\n          plot.new()\n          title(\"Not enough data for dendrogram\")\n          return()\n        }\n\n        dist_matrix <- dist(data_for_tree)\n        hc <- hclust(dist_matrix, method = \"ward.D2\")\n        plot(hc, main = paste0(\"Dendrogram (Sample of \", max_rows, \" rows)\"), xlab = \"\", sub = \"\")\n      })\n\n      output$cluster_summary <- renderDT(NULL)\n    })\n\n    observeEvent(input$run_cluster, {\n      req(clean_data(), input$k)\n\n      # Limit k-means to reasonable cluster count\n      if (input$k > 10) {\n        showNotification(\"Maximum 10 clusters allowed for stability.\", type = \"warning\")\n        return()\n      }\n\n      # Reduce nstart for large datasets to save computation\n      nstart_val <- if (nrow(clean_data()) > 1000) 5 else 10\n\n      set.seed(42)\n      k_res <- kmeans(clean_data(), centers = input$k, nstart = nstart_val)\n\n      current_df <- data_reactive()\n\n      base_name <- \"Cluster_Membership\"\n      new_name <- base_name\n      counter <- 1\n\n      while (new_name %in% names(current_df)) {\n        counter <- counter + 1\n        new_name <- paste0(base_name, \"_\", counter)\n      }\n\n      cluster_vec <- rep(NA, nrow(current_df))\n      used_indices <- which(complete.cases(current_df[, input$cols, drop = FALSE]))\n      cluster_vec[used_indices] <- as.factor(k_res$cluster)\n\n      current_df[[new_name]] <- as.factor(cluster_vec)\n\n      update_data_function(current_df)\n      showNotification(paste(\"Clustering complete! Added variable:\", new_name), type = \"message\")\n\n      segment_means <- round(k_res$centers, 2)\n      colnames(segment_means) <- paste0(\"Mean_\", colnames(segment_means))\n\n      summary_df <- data.frame(\n        Cluster = 1:input$k,\n        Count = k_res$size,\n        Percentage = round((k_res$size / sum(k_res$size)) * 100, 2),\n        segment_means\n      )\n\n      output$cluster_summary <- renderDT({\n        datatable(summary_df, extensions = \"Buttons\", options = get_dt_options(dom = \"lBfrtip\"))\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: REGRESSION (LINEAR)\n# ==============================================================================\n\nlinear_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Linear Regression\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"dep_selector\")),\n        uiOutput(ns(\"indep_selector\")),\n        actionButton(ns(\"run\"), \"Run Model\", class = \"btn-primary w-100\"),\n        hr(),\n        downloadButton(ns(\"dl\"), \"Download Results (CSV)\", class = \"w-100\")\n      ),\n      navset_card_tab(\n        nav_panel(\"Output\", DTOutput(ns(\"model_table\"))),\n        nav_panel(\"Stats\", verbatimTextOutput(ns(\"model_stats\")))\n      )\n    )\n  )\n}\n\nlinear_server <- function(id, data_reactive, shared_model) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n    res_store <- reactiveVal()\n\n    output$dep_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"dep\"), \"Dependent Variable\", choices = names(data_reactive()))\n    })\n\n    output$indep_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"indep\"), \"Independent Variables\",\n                     choices = names(data_reactive()), multiple = TRUE)\n    })\n\n    observeEvent(input$run, {\n      req(data_reactive(), input$dep, input$indep)\n      df <- data_reactive()\n      f <- as.formula(paste0(\"`\", input$dep, \"` ~ \",\n                             paste(paste0(\"`\", input$indep, \"`\"), collapse = \"+\")))\n      m <- lm(f, data = df)\n\n      res_table <- tidy(m) %>% mutate(across(where(is.numeric), ~ round(., 3)))\n      res_store(res_table)\n\n      # Store model in shared reactive for prediction tool\n      shared_model(list(\n        model = m,\n        dep = input$dep,\n        indep = input$indep,\n        type = \"linear\"\n      ))\n\n      output$model_table <- renderDT({\n        datatable(res_table, extensions = \"Buttons\",\n                  options = get_dt_options(dom = \"lBfrtip\"))\n      })\n      output$model_stats <- renderPrint({ summary(m) })\n    })\n\n    output$dl <- downloadHandler(\n      filename = \"linear_results.csv\",\n      content = function(file) {\n        write.csv(res_store(), file, row.names = FALSE)\n      }\n    )\n  })\n}\n\n# ==============================================================================\n# MODULE: REGRESSION (LOGISTIC)\n# ==============================================================================\n\nlogistic_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Logistic Regression\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"dep_selector\")),\n        uiOutput(ns(\"indep_selector\")),\n        actionButton(ns(\"run\"), \"Run Model\", class = \"btn-primary w-100\"),\n        hr(),\n        downloadButton(ns(\"dl\"), \"Download Results (CSV)\", class = \"w-100\")\n      ),\n      navset_card_tab(\n        nav_panel(\"Output\", DTOutput(ns(\"model_table\"))),\n        nav_panel(\"Confusion Matrix\", verbatimTextOutput(ns(\"conf_matrix\")))\n      )\n    )\n  )\n}\n\nlogistic_server <- function(id, data_reactive, shared_model) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n    res_store <- reactiveVal()\n\n    output$dep_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"dep\"), \"Dependent (Binary)\", choices = names(data_reactive()))\n    })\n\n    output$indep_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"indep\"), \"Independent Variables\",\n                     choices = names(data_reactive()), multiple = TRUE)\n    })\n\n    observeEvent(input$run, {\n      req(data_reactive(), input$dep, input$indep)\n      df <- data_reactive()\n      f <- as.formula(paste0(\"`\", input$dep, \"` ~ \",\n                             paste(paste0(\"`\", input$indep, \"`\"), collapse = \"+\")))\n      m <- glm(f, data = df, family = \"binomial\")\n\n      res_table <- tidy(m) %>% mutate(across(where(is.numeric), ~ round(., 3)))\n      res_store(res_table)\n\n      # Store model in shared reactive for prediction tool\n      shared_model(list(\n        model = m,\n        dep = input$dep,\n        indep = input$indep,\n        type = \"logistic\"\n      ))\n\n      output$model_table <- renderDT({\n        datatable(res_table, extensions = \"Buttons\",\n                  options = get_dt_options(dom = \"lBfrtip\"))\n      })\n\n      output$conf_matrix <- renderPrint({\n        preds <- ifelse(predict(m, type = \"response\") > 0.5, 1, 0)\n        actual <- df[[input$dep]]\n        table(Predicted = preds, Actual = actual)\n      })\n    })\n\n    output$dl <- downloadHandler(\n      filename = \"logistic_results.csv\",\n      content = function(file) {\n        write.csv(res_store(), file, row.names = FALSE)\n      }\n    )\n  })\n}\n\n# ==============================================================================\n# MODULE: PREDICTION TOOL\n# ==============================================================================\n\npredict_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Prediction Tool\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"model_status\")),\n        hr(),\n        h5(\"Enter Values for Prediction\"),\n        uiOutput(ns(\"predictor_inputs\")),\n        actionButton(ns(\"predict\"), \"Generate Prediction\", class = \"btn-success w-100 mt-3\")\n      ),\n      h5(\"Model Coefficients\"),\n      DTOutput(ns(\"model_table\")),\n      hr(),\n      h5(\"Prediction Output\"),\n      uiOutput(ns(\"prediction_output\"))\n    )\n  )\n}\n\npredict_server <- function(id, data_reactive, shared_model) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    # Display current model status\n    output$model_status <- renderUI({\n      model_info <- shared_model()\n\n      if (is.null(model_info)) {\n        div(class = \"alert alert-warning\",\n            icon(\"exclamation-triangle\"),\n            strong(\" No model loaded\"),\n            p(\"Please run a Linear or Logistic Regression first, then return here to make predictions.\")\n        )\n      } else {\n        model_type_label <- ifelse(model_info$type == \"linear\", \"Linear Regression\", \"Logistic Regression\")\n        div(class = \"alert alert-success\",\n            icon(\"check-circle\"),\n            strong(paste(\" Model Loaded:\", model_type_label)),\n            p(strong(\"Dependent: \"), model_info$dep),\n            p(strong(\"Independent: \"), paste(model_info$indep, collapse = \", \"))\n        )\n      }\n    })\n\n    # Show model coefficients as a table\n    output$model_table <- renderDT({\n      req(shared_model())\n      m <- shared_model()$model\n      res_table <- tidy(m) %>% mutate(across(where(is.numeric), ~ round(., 4)))\n      datatable(res_table, extensions = \"Buttons\",\n                options = get_dt_options(dom = \"lBfrtip\"))\n    })\n\n    # Generate predictor input fields\n    output$predictor_inputs <- renderUI({\n      req(shared_model())\n      vars <- shared_model()$indep\n      df <- data_reactive()\n\n      input_list <- lapply(vars, function(v) {\n        if (is.numeric(df[[v]])) {\n          numericInput(ns(paste0(\"pred_\", v)),\n                       label = v,\n                       value = round(mean(df[[v]], na.rm = TRUE), 2))\n        } else {\n          # For categorical variables, show dropdown with levels\n          levels_v <- if (is.factor(df[[v]])) levels(df[[v]]) else unique(df[[v]])\n          selectInput(ns(paste0(\"pred_\", v)),\n                      label = v,\n                      choices = levels_v)\n        }\n      })\n\n      tagList(input_list)\n    })\n\n    # Single prediction\n    observeEvent(input$predict, {\n      req(shared_model())\n\n      model_info <- shared_model()\n      m <- model_info$model\n      vars <- model_info\n      df <- data_reactive()\n\n      tryCatch({\n        # Build new data frame for prediction\n        new_data <- data.frame(row.names = 1)\n\n        for (v in vars$indep) {\n          input_val <- input[[paste0(\"pred_\", v)]]\n          if (is.numeric(df[[v]])) {\n            new_data[[v]] <- as.numeric(input_val)\n          } else {\n            new_data[[v]] <- input_val\n            if (is.factor(df[[v]])) {\n              new_data[[v]] <- factor(new_data[[v]], levels = levels(df[[v]]))\n            }\n          }\n        }\n\n        # Make prediction\n        if (vars$type == \"linear\") {\n          pred <- predict(m, newdata = new_data, interval = \"confidence\")\n\n          output$prediction_output <- renderUI({\n            tagList(\n              div(class = \"alert alert-success\",\n                  h4(\"Predicted Value\"),\n                  p(strong(paste0(vars$dep, \" = \", round(pred[1, \"fit\"], 4)))),\n                  p(paste0(\"95% Confidence Interval: [\",\n                           round(pred[1, \"lwr\"], 4), \", \",\n                           round(pred[1, \"upr\"], 4), \"]\"))\n              ),\n              h6(\"Input Values Used:\"),\n              tags$ul(\n                lapply(vars$indep, function(v) {\n                  tags$li(paste0(v, \" = \", input[[paste0(\"pred_\", v)]]))\n                })\n              )\n            )\n          })\n\n        } else {\n          # Logistic regression\n          pred_prob <- predict(m, newdata = new_data, type = \"response\")\n          pred_class <- ifelse(pred_prob > 0.5, 1, 0)\n\n          output$prediction_output <- renderUI({\n            tagList(\n              div(class = \"alert alert-info\",\n                  h4(\"Predicted Probability\"),\n                  p(strong(paste0(\"P(\", vars$dep, \" = 1) = \", round(pred_prob, 4)))),\n                  p(paste0(\"Predicted Class (threshold = 0.5): \", pred_class))\n              ),\n              h6(\"Input Values Used:\"),\n              tags$ul(\n                lapply(vars$indep, function(v) {\n                  tags$li(paste0(v, \" = \", input[[paste0(\"pred_\", v)]]))\n                })\n              )\n            )\n          })\n        }\n\n      }, error = function(e) {\n        showNotification(paste(\"Prediction error:\", e$message), type = \"error\")\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# IU BRANDING CSS & JS\n# ==============================================================================\n\niu_theme_css <- \"\n:root {\n  --iu-crimson: #990000;\n  --iu-cream:   #EDE6D6;\n  --iu-grey:    #7D7D7D;\n  --iu-black:   #000000;\n  --iu-white:   #FFFFFF;\n}\n\n/* NAVBAR / HEADER */\n.navbar {\n  background-color: var(--iu-crimson) !important;\n  border-bottom: 3px solid var(--iu-cream);\n}\n\n.navbar .navbar-brand,\n.navbar span,\n.navbar a {\n  color: var(--iu-white) !important;\n  font-weight: bold;\n  font-size: 1.1rem;\n}\n\n/* SIDEBAR */\n.bslib-sidebar {\n  background-color: var(--iu-cream) !important;\n  padding-top: 1rem;\n  border-right: 3px solid var(--iu-crimson);\n}\n\n.bslib-sidebar ul {\n  padding-left: 0 !important;\n}\n\n.bslib-sidebar a {\n  display: block;\n  padding: 10px 16px;\n  margin-bottom: 6px;\n  border-radius: 6px;\n  font-weight: 600;\n  color: var(--iu-black) !important;\n  text-decoration: none !important;\n  background-color: transparent;\n  transition: all 0.2s ease-in-out;\n}\n\n.bslib-sidebar a i {\n  margin-right: 8px;\n  color: var(--iu-crimson);\n}\n\n/* Hover */\n.bslib-sidebar a:hover {\n  background-color: var(--iu-crimson);\n  color: var(--iu-white) !important;\n}\n\n.bslib-sidebar a:hover i {\n  color: var(--iu-white);\n}\n\n/* Active item */\n.active-sidebar-item {\n  background-color: var(--iu-crimson) !important;\n  color: var(--iu-white) !important;\n}\n\n.active-sidebar-item i {\n  color: var(--iu-white) !important;\n}\n\n/* MOBILE SIDEBAR */\n@media (max-width: 992px) {\n  .bslib-sidebar {\n    position: fixed;\n    top: 56px;\n    left: -260px;\n    width: 240px;\n    height: 100%;\n    background-color: var(--iu-cream) !important;\n    box-shadow: 4px 0px 10px rgba(0,0,0,0.2);\n    transition: left 0.3s ease;\n    z-index: 1050;\n  }\n  .sidebar-open .bslib-sidebar {\n    left: 0;\n  }\n  .mobile-toggle {\n    position: relative;\n    margin-right: 12px;\n    background-color: var(--iu-white);\n    border: 2px solid var(--iu-crimson);\n    border-radius: 6px;\n    padding: 4px 8px;\n    cursor: pointer;\n    font-weight: bold;\n  }\n}\n\"\n\n# ==============================================================================\n# MAIN UI\n# ==============================================================================\n\nui <- page_sidebar(\n  title = div(\n    class = \"d-flex align-items-center\",\n    img(\n      src = \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Indiana_Hoosiers_logo.svg/1280px-Indiana_Hoosiers_logo.svg.png\",\n      height = \"40px\",\n      style = \"margin-right: 15px; background-color: white; padding: 5px; border-radius: 5px;\"\n    ),\n    span(\"M450 Data Analysis Tool\",\n         style = \"font-weight: bold; font-size: 1.2rem; color: white;\")\n  ),\n\n  theme = bs_theme(\n    version = 5,\n    bg = \"#FFFFFF\",\n    fg = \"#000000\",\n    primary = \"#990000\",\n    secondary = \"#EDE6D6\",\n    base_font = font_google(\"Source Sans Pro\")\n  ),\n\n  tags$head(\n    tags$style(HTML(iu_theme_css)),\n    # Active link highlight\n    tags$script(HTML(\"\n      document.addEventListener('DOMContentLoaded', function() {\n        const sidebar = document.querySelector('.bslib-sidebar');\n        if (!sidebar) return;\n        const links = sidebar.querySelectorAll('a');\n        if (links.length > 0) {\n          links[0].classList.add('active-sidebar-item');\n        }\n        links.forEach(link => {\n          link.addEventListener('click', function() {\n            links.forEach(l => l.classList.remove('active-sidebar-item'));\n            this.classList.add('active-sidebar-item');\n          });\n        });\n      });\n    \")),\n    # Mobile toggle behavior\n    tags$script(HTML(\"\n      document.addEventListener('click', function(e) {\n        if (e.target.closest('.mobile-toggle')) {\n          document.body.classList.toggle('sidebar-open');\n        } else if (e.target.closest('.bslib-sidebar a')) {\n          document.body.classList.remove('sidebar-open');\n        }\n      });\n    \"))\n  ),\n\n  sidebar = sidebar(\n    title = \"Navigation\",\n    tags$ul(\n      class = \"list-unstyled\",\n      tags$li(actionLink(\"go_home\", \"Home / Upload\", icon = icon(\"home\"))),\n      tags$li(actionLink(\"go_filter\", \"Filter Data\", icon = icon(\"filter\"))),\n      tags$li(actionLink(\"go_summary\", \"Summary Stats\", icon = icon(\"chart-bar\"))),\n      tags$li(actionLink(\"go_corr\", \"Correlations\", icon = icon(\"th\"))),\n      tags$li(actionLink(\"go_transform\", \"Data Transformation\", icon = icon(\"magic\"))),\n      tags$li(actionLink(\"go_cluster\", \"Cluster Analysis\", icon = icon(\"object-group\"))),\n      tags$li(actionLink(\"go_linear\", \"Linear Regression\", icon = icon(\"chart-line\"))),\n      tags$li(actionLink(\"go_logistic\", \"Logistic Regression\", icon = icon(\"check-circle\"))),\n      tags$li(actionLink(\"go_predict\", \"Prediction Tool\", icon = icon(\"calculator\")))\n    )\n  ),\n\n  uiOutput(\"page_content\")\n)\n\n# ==============================================================================\n# SERVER\n# ==============================================================================\n\nserver <- function(input, output, session) {\n\n  original_data <- reactiveVal(NULL) # store original upload\n  shared_model  <- reactiveVal(NULL) # shared model for prediction tool\n  global_data   <- reactiveVal(NULL) # working copy\n\n  update_data <- function(new_df) {\n    global_data(new_df)\n  }\n\n  current_page <- reactiveVal(\"home\")\n\n  observeEvent(input$go_home,     { current_page(\"home\") })\n  observeEvent(input$go_filter,   { current_page(\"filter\") })\n  observeEvent(input$go_summary,  { current_page(\"summary\") })\n  observeEvent(input$go_corr,     { current_page(\"corr\") })\n  observeEvent(input$go_transform,{ current_page(\"transform\") })\n  observeEvent(input$go_cluster,  { current_page(\"cluster\") })\n  observeEvent(input$go_linear,   { current_page(\"linear\") })\n  observeEvent(input$go_logistic, { current_page(\"logistic\") })\n  observeEvent(input$go_predict,  { current_page(\"predict\") })\n\n  output$page_content <- renderUI({\n    page <- current_page()\n\n    if (page == \"home\") {\n      card(\n        card_header(\"Welcome to M450 Data Analytics\"),\n        p(\"Please upload a CSV dataset below. This data will be available across all modules.\"),\n        fileInput(\"upload_file\", \"Upload Dataset (CSV)\", accept = c(\".csv\")),\n        hr(),\n        h5(\"Current Data Preview:\"),\n        DTOutput(\"home_preview\")\n      )\n    } else if (page == \"filter\") {\n      filter_ui(\"mod_filter\")\n    } else if (page == \"summary\") {\n      summary_ui(\"mod_summary\")\n    } else if (page == \"corr\") {\n      corr_ui(\"mod_corr\")\n    } else if (page == \"transform\") {\n      transform_ui(\"mod_transform\")\n    } else if (page == \"cluster\") {\n      cluster_ui(\"mod_cluster\")\n    } else if (page == \"linear\") {\n      linear_ui(\"mod_linear\")\n    } else if (page == \"logistic\") {\n      logistic_ui(\"mod_logistic\")\n    } else if (page == \"predict\") {\n      predict_ui(\"mod_predict\")\n    }\n  })\n\n  # Upload handler (CSV only, Shinylive-safe)\n  observeEvent(input$upload_file, {\n    req(input$upload_file)\n\n    # File size limit: 10 MB\n    if (input$upload_file$size > 10 * 1024 * 1024) {\n      showNotification(\"File too large. Please upload a CSV file smaller than 10 MB.\", type = \"error\")\n      return()\n    }\n\n    tryCatch({\n      df <- read.csv(input$upload_file$datapath, check.names = FALSE)\n\n      # Row limit for stability\n      if (nrow(df) > 10000) {\n        showNotification(\"Dataset has more than 10,000 rows. Using first 10,000 rows only.\", type = \"warning\")\n        df <- df[1:10000, ]\n      }\n\n      original_data(df)\n      global_data(df)\n      showNotification(\"Data uploaded successfully!\", type = \"message\")\n    }, error = function(e) {\n      showNotification(paste(\"Error reading file:\", e$message), type = \"error\")\n    })\n  })\n\n  output$home_preview <- renderDT({\n    req(global_data())\n    datatable(head(global_data(), 10),\n              extensions = \"Buttons\",\n              options = get_dt_options(dom = \"lBfrtip\"))\n  })\n\n  # Module calls\n  filter_server(\"mod_filter\", global_data, original_data, update_data)\n  summary_server(\"mod_summary\", global_data)\n  corr_server(\"mod_corr\", global_data)\n  transform_server(\"mod_transform\", global_data, update_data)\n  cluster_server(\"mod_cluster\", global_data, update_data)\n  linear_server(\"mod_linear\", global_data, shared_model)\n  logistic_server(\"mod_logistic\", global_data, shared_model)\n  predict_server(\"mod_predict\", global_data, shared_model)\n}\n\nshinyApp(ui, server)\n","type":"text"},{"name":"DEPLOYMENT_FIXES.md","content":"# Shiny App Deployment Fixes for Multiple Concurrent Users\n\n## Issues Fixed\n\n### 1. **File Upload Limits** ✓\n- **Problem**: Large files caused memory crashes\n- **Solution**: Added 10 MB file size limit and 10,000 row limit\n- **Location**: app.R:1181-1201\n\n### 2. **Clustering Performance** ✓\n- **Problem**: K-means with high nstart values consumed too much CPU\n- **Solution**: Reduced nstart to 5 for datasets >1000 rows, limited max clusters to 10\n- **Location**: app.R:590-600\n\n### 3. **Dendrogram Memory Issues** ✓\n- **Problem**: Hierarchical clustering on large datasets caused crashes\n- **Solution**: Already samples to 100 rows max, added safety checks\n- **Location**: app.R:576-593\n\n## Shinyapps.io Configuration Recommendations\n\n### Upgrade Your Plan (CRITICAL)\nThe **free tier** has severe limitations:\n- **Active hours**: 25 hours/month\n- **Memory**: 1 GB RAM (shared across all users)\n- **Concurrent connections**: Limited\n\nFor a classroom with multiple students, you need **AT LEAST**:\n- **Basic Plan** ($9/month): 500 active hours, 1GB RAM per instance\n- **Standard Plan** ($99/month): Unlimited hours, multiple instances, better support\n\n### Deployment Settings\n\n1. **Log into shinyapps.io**\n2. **Go to your app settings**\n3. **Configure these settings:**\n\n```\nInstance Size: Medium or Large (if available on your plan)\nMax Worker Processes: 3 or higher\nMax Connections per Worker: 20\nStart Count: 2 instances\nMax Instances: 4 instances\nConnection Timeout: 60 seconds\nRead Timeout: 300 seconds (5 minutes)\nIdle Timeout: 15 minutes\n```\n\n## Alternative Hosting Solutions\n\nIf shinyapps.io crashes persist, consider:\n\n### 1. **Posit Connect** (Recommended for Universities)\n- Better resource management\n- IU may have institutional access\n- Contact: https://posit.co/products/enterprise/connect/\n\n### 2. **Self-Hosted Shiny Server**\n- Full control over resources\n- Can use IU infrastructure\n- Free open-source version available\n\n### 3. **ShinyProxy** (Docker-based)\n- Each user gets isolated container\n- Better for classroom use\n- Free and open-source\n\n### 4. **Hugging Face Spaces**\n- Free tier more generous than shinyapps.io\n- Easy deployment with Docker\n- Good community support\n\n## Immediate Actions to Take\n\n### Step 1: Check Current Usage\n```bash\n# In R console, check deployment info\nlibrary(rsconnect)\nrsconnect::accounts()  # View connected accounts\nrsconnect::applications()  # View deployed apps\n```\n\n### Step 2: Redeploy with Fixes\n```r\n# In R console\nlibrary(rsconnect)\n\n# Set working directory\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\n\n# Deploy with the fixes\nrsconnect::deployApp(\n  appName = \"m450-data-tool\",\n  appTitle = \"M450 Data Analysis Tool\",\n  account = \"your-account-name\",  # Replace with your account\n  forceUpdate = TRUE\n)\n```\n\n### Step 3: Monitor Performance\nAfter redeploying:\n1. Go to shinyapps.io dashboard\n2. Click on your app\n3. View \"Metrics\" tab\n4. Monitor:\n   - Memory usage\n   - CPU usage\n   - Active connections\n   - Error logs\n\n### Step 4: Optimize Instance Settings\nIf still having issues:\n1. Go to Settings → Runtime\n2. Increase \"Instance Size\" (requires paid plan)\n3. Enable \"Multiple Workers\"\n4. Set \"Idle Timeout\" to 5 minutes\n\n## Code Optimizations Already Implemented\n\n### Memory Management\n```r\n# File size limit: 10 MB\nif (input$upload_file$size > 10 * 1024 * 1024) {\n  showNotification(\"File too large...\", type = \"error\")\n  return()\n}\n\n# Row limit: 10,000 rows\nif (nrow(df) > 10000) {\n  df <- df[1:10000, ]\n}\n```\n\n### Computational Efficiency\n```r\n# Adaptive nstart for k-means\nnstart_val <- if (nrow(clean_data()) > 1000) 5 else 10\n\n# Cluster count limit\nif (input$k > 10) {\n  showNotification(\"Maximum 10 clusters allowed\", type = \"warning\")\n  return()\n}\n```\n\n### Error Handling\n```r\n# Safe file upload\ntryCatch({\n  df <- read.csv(input$upload_file$datapath, check.names = FALSE)\n  # ... process data\n}, error = function(e) {\n  showNotification(paste(\"Error:\", e$message), type = \"error\")\n})\n```\n\n## Student Usage Guidelines\n\nShare these tips with your students:\n\n1. **Upload smaller datasets** (< 5 MB, < 5000 rows recommended)\n2. **Avoid simultaneous heavy operations**:\n   - Limit cluster analysis to 5 or fewer clusters\n   - Don't run clustering while others are using the app heavily\n3. **Close browser tab when done** to free up resources\n4. **Don't refresh repeatedly** if app is slow - be patient\n\n## Troubleshooting Common Issues\n\n### \"Application failed to start\"\n- **Cause**: Memory limit exceeded during initialization\n- **Fix**: Upgrade to paid plan or reduce initial data processing\n\n### \"Disconnected from server\"\n- **Cause**: Session timeout or worker crash\n- **Fix**: Increase timeout settings, check error logs\n\n### \"Application not responding\"\n- **Cause**: Too many concurrent users or heavy computation\n- **Fix**: Scale up instances or add worker processes\n\n### \"Out of memory error\"\n- **Cause**: Large datasets or too many sessions\n- **Fix**: Enforce stricter data limits or upgrade instance size\n\n## Testing the Fixes\n\n### Local Testing\n```r\n# Test with multiple browser sessions\n# Open 3-4 browser tabs to your app\n# Upload data in each and run analyses simultaneously\n```\n\n### Load Testing\n```r\n# Install shinyloadtest\ninstall.packages(\"shinyloadtest\")\n\n# Record session\nshinyloadtest::record_session(\"http://your-app-url.shinyapps.io\")\n\n# Run load test with multiple users\nshinyloadtest::load_runs(\n  recording = \"recording.log\",\n  workers = 5,  # Simulate 5 concurrent users\n  duration_minutes = 5\n)\n```\n\n## Getting Help\n\nIf issues persist:\n\n1. **Check shinyapps.io logs**:\n   - Dashboard → Your App → Logs\n   - Look for error messages and memory warnings\n\n2. **Contact Posit Support**:\n   - Email: support@posit.co\n   - Include: app URL, error logs, usage patterns\n\n3. **IU IT Support**:\n   - Ask about institutional Posit Connect access\n   - Request dedicated server resources for classroom apps\n\n4. **Shiny Community**:\n   - RStudio Community: https://community.rstudio.com\n   - Stack Overflow: Tag with [shiny] and [shinyapps.io]\n\n## Next Steps\n\n1. ✓ **Code optimizations applied**\n2. **Redeploy app with fixes**\n3. **Monitor usage in first class session**\n4. **Consider plan upgrade if crashes continue**\n5. **Implement student usage guidelines**\n6. **Set up monitoring dashboard**\n\n---\n\n**Last Updated**: February 10, 2026\n**For**: M450 Data Analysis Tool\n**Version**: 2.0 (Optimized for Multiple Users)\n","type":"text"},{"name":"DEPLOY_NOW.md","content":"# Deploy Shinylive - Step by Step Instructions\n\n## YOU HAVE TWO OPTIONS:\n\n---\n\n## OPTION 1: Use RStudio (Recommended - Takes 5 Minutes)\n\n### Step 1: Open RStudio\n\n### Step 2: Copy and paste this into the R Console:\n\n```r\n# Install shinylive\ninstall.packages(\"shinylive\")\n\n# Load library\nlibrary(shinylive)\n\n# Set working directory\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\n\n# Export to Shinylive\nshinylive::export(\n  appdir = \".\",\n  destdir = \"shinylive_export\"\n)\n\n# Test locally (optional)\nshinylive::run_shinylive(\"shinylive_export\")\n```\n\n### Step 3: Wait for Export\n- This takes 30-60 seconds\n- It will download R packages and create browser-compatible versions\n- You'll see a `shinylive_export` folder when done\n\n### Step 4: Deploy to Netlify (Easiest!)\n\n1. Go to https://app.netlify.com/drop\n2. Create free account (or log in)\n3. **Drag the `shinylive_export` folder** onto the deploy area\n4. Wait 10 seconds\n5. Get your URL! Something like: `https://m450-data-tool.netlify.app`\n6. Share with students!\n\n**DONE!** No more crashes! ✅\n\n---\n\n## OPTION 2: Use the Web-Based Shinylive Editor (No R Installation Needed!)\n\n### Step 1: Go to Shinylive Editor\nVisit: https://shinylive.io/r/editor/\n\n### Step 2: Replace the Code\n1. Delete everything in the editor\n2. Open `app_shinylive.R` from your folder\n3. Copy ALL the code\n4. Paste into the Shinylive editor\n\n### Step 3: Test It\n- Click \"Run App\" in the editor\n- Upload a CSV and test features\n- Make sure everything works\n\n### Step 4: Share or Export\n\n**Option A - Quick Share:**\n- Click the \"Share\" button\n- Get a URL like: `https://shinylive.io/r/app/#code=...`\n- Share with students\n- **Limitation**: Very long URL, can break if code changes\n\n**Option B - Download and Deploy (Better):**\n1. In the Shinylive editor, click the menu (three dots)\n2. Select \"Download app\"\n3. Extract the ZIP file\n4. Go to https://app.netlify.com/drop\n5. Drag the extracted folder\n6. Get permanent URL!\n\n---\n\n## WHICH OPTION SHOULD I USE?\n\n- **Have RStudio?** → Use Option 1 (faster, cleaner)\n- **Don't have R or having R PATH issues?** → Use Option 2 (works in browser)\n- **Want to test before deploying?** → Use Option 1\n- **Want fastest deployment?** → Use Option 2, then download & deploy\n\n---\n\n## After Deployment - Share with Students\n\nSend them an email like this:\n\n---\n\n**Subject: M450 Data Analysis Tool - Now Available Online**\n\nHi class,\n\nI've deployed the M450 Data Analysis Tool for you to use in our course. Here's how to access it:\n\n**🔗 App URL:** [YOUR-URL-HERE]\n\n**📝 How to use:**\n1. Click the link above\n2. Wait 15-30 seconds for initial load (first time only)\n3. Upload your CSV dataset\n4. Use the sidebar to navigate between analysis tools\n\n**💡 Important notes:**\n- The app runs entirely in YOUR browser - your data is completely private\n- First load takes 15-30 seconds (loading R packages)\n- After initial load, everything is instant\n- Works best in Chrome, Firefox, or Edge\n- Your data never leaves your computer\n- No login required\n\n**📱 Mobile:** Works on tablets and phones, but desktop is recommended for best experience.\n\n**❓ Problems?** Email me or see the course discussion board.\n\nSee you in class!\n\n---\n\n## Troubleshooting\n\n### \"Error: package 'shinylive' not available\"\n```r\n# Try installing from CRAN explicitly\ninstall.packages(\"shinylive\", repos = \"https://cloud.r-project.org/\")\n```\n\n### \"Export taking forever\"\n- First time export takes 1-2 minutes (downloads packages)\n- Make sure you have internet connection\n- Be patient!\n\n### \"Can't find R or RStudio\"\n- Use Option 2 (web-based editor)\n- Or download R from: https://cran.r-project.org/\n- Or use Posit Cloud: https://posit.cloud\n\n### \"Netlify deploy failed\"\n- Make sure you dragged the `shinylive_export` FOLDER, not individual files\n- Try zipping the folder first, then drag the ZIP\n- Or try using Netlify Drop directly: https://app.netlify.com/drop\n\n### \"App loads but features don't work\"\n- Check browser console (F12) for errors\n- Try different browser (Chrome recommended)\n- Make sure JavaScript is enabled\n- Disable browser extensions (especially ad blockers)\n\n---\n\n## Next Steps After Deployment\n\n1. ✅ **Test with a few students first**\n   - Have 2-3 students test it before class\n   - Get feedback on load time and usability\n\n2. ✅ **Monitor usage**\n   - Netlify shows you visitor stats\n   - Free tier is VERY generous (100 GB/month bandwidth)\n\n3. ✅ **Keep backup URL**\n   - Deploy to 2 platforms (Netlify + GitHub Pages)\n   - Give students both URLs in case one is slow\n\n4. ✅ **Update as needed**\n   - Make changes to app.R\n   - Re-export and re-deploy\n   - Changes go live in minutes\n\n---\n\n## Cost Breakdown\n\n| Item | Cost |\n|------|------|\n| Shinylive export | FREE |\n| Netlify hosting | FREE (100GB/month) |\n| GitHub Pages | FREE (1GB storage) |\n| Custom domain (optional) | $10-15/year |\n| **TOTAL REQUIRED** | **$0** |\n\nCompare to shinyapps.io:\n- Free tier: Crashes with >5 students\n- Basic ($9/month): Still limited\n- Standard ($99/month): Works for classroom\n- **Shinylive: FREE + UNLIMITED** ✅\n\n---\n\n## Summary\n\n**You have everything you need:**\n- ✅ `app_shinylive.R` - Optimized for browser\n- ✅ Instructions (this file)\n- ✅ Deployment options\n\n**Timeline:**\n- RStudio export: 2 minutes\n- Netlify deploy: 30 seconds\n- Total: **Less than 5 minutes to go live**\n\n**Result:**\n- ✅ No crashes with multiple students\n- ✅ Free forever\n- ✅ Unlimited users\n- ✅ Private (data stays in browser)\n- ✅ Fast (after initial load)\n\n**DO IT NOW!** Open RStudio and run the export command above. You'll be deployed in 5 minutes! 🚀\n","type":"text"},{"name":"MANUAL_SHINYLIVE_SETUP.md","content":"# Manual Shinylive Setup (Since R isn't in PATH)\n\n## Option 1: Use RStudio (Easiest!)\n\n1. **Open RStudio**\n\n2. **Run these commands in the R Console:**\n\n```r\n# Install shinylive if you haven't already\ninstall.packages(\"shinylive\")\n\n# Load the library\nlibrary(shinylive)\n\n# Set working directory\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\n\n# Export to Shinylive\nshinylive::export(\n  appdir = \".\",\n  destdir = \"shinylive_export\"\n)\n\n# Test it locally\nshinylive::run_shinylive(\"shinylive_export\")\n```\n\n3. **Wait for export to complete** (30-60 seconds)\n\n4. **Your shinylive_export folder is ready!**\n\n---\n\n## Option 2: Alternative - Use Posit Cloud (100% Online)\n\nIf the export doesn't work, you can use Posit Cloud:\n\n1. Go to https://posit.cloud (free account)\n2. Create a new project\n3. Upload your `app.R` file\n4. Install packages:\n   ```r\n   install.packages(\"shinylive\")\n   library(shinylive)\n   shinylive::export(\".\", \"shinylive_export\")\n   ```\n5. Download the `shinylive_export` folder\n6. Deploy to Netlify\n\n---\n\n## Option 3: I'll Create a Web-Based Version\n\nActually, let me create an even BETTER solution - a standalone HTML file that you can just open in a browser!\n\nThis is coming in the next step...\n\n---\n\n## After Export - Deploy to Netlify\n\n1. **Go to** https://app.netlify.com/drop\n\n2. **Drag your `shinylive_export` folder** onto the page\n\n3. **Get your URL** - something like `https://m450-data-tool.netlify.app`\n\n4. **Share with students!**\n\n---\n\n## Troubleshooting\n\n### If export fails:\n- Make sure you have an internet connection (downloads packages)\n- Try updating R: `install.packages(\"shinylive\", type = \"binary\")`\n- Check RStudio version (need 2023.06.0 or newer)\n\n### If you see \"Error in loadNamespace\":\n```r\n# Update all packages\nupdate.packages(ask = FALSE)\n\n# Then try again\nlibrary(shinylive)\nshinylive::export(\".\", \"shinylive_export\")\n```\n","type":"text"},{"name":"QUICK_START.md","content":"# Quick Start: Deploy Shinylive in 5 Minutes ⚡\n\n## The Fastest Way to Fix Your Crashing App\n\n### Option 1: Run the Automated Script (Easiest!)\n\n1. Open RStudio\n2. Run this command:\n\n```r\nsource(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool/deploy_shinylive.R\")\n```\n\n3. Follow the prompts\n4. Deploy to Netlify (drag and drop!)\n5. Done! 🎉\n\n### Option 2: Manual Steps\n\n```r\n# Install shinylive\ninstall.packages(\"shinylive\")\n\n# Export your app\nlibrary(shinylive)\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\nshinylive::export(\".\", \"shinylive_export\")\n\n# Test locally\nshinylive::run_shinylive(\"shinylive_export\")\n```\n\nThen deploy `shinylive_export` folder to:\n- **Netlify**: https://app.netlify.com/drop (just drag and drop!)\n- **GitHub Pages**: Create repo, upload files, enable Pages\n\n---\n\n## Why This Fixes Your Problem\n\n**Your current issue**:\n> \"App crashes when multiple students use it\"\n\n**Why Shinylive solves it**:\n- ✅ Runs in each student's browser (no shared server)\n- ✅ No server to crash\n- ✅ Unlimited concurrent users\n- ✅ FREE forever\n- ✅ Zero maintenance\n\n**Comparison**:\n\n| What | Shinyapps.io Free | Shinylive |\n|------|-------------------|-----------|\n| Concurrent users | ~5 | ∞ |\n| Monthly hours | 25 | ∞ |\n| Crashes with class | YES | NO |\n| Cost | $0 (then $9+) | $0 forever |\n\n---\n\n## Student Access\n\nAfter deploying, give students ONE URL:\n```\nhttps://your-app.netlify.app\n```\n\nThey:\n1. Open the link\n2. Wait 15-30 seconds (first load only)\n3. Use the tool\n4. Their data stays in their browser (private)\n\nNo login, no setup, no crashes!\n\n---\n\n## Need Help?\n\n- **Full guide**: See `SHINYLIVE_DEPLOYMENT.md`\n- **Deployment fixes**: See `DEPLOYMENT_FIXES.md`\n- **Issues**: Check https://github.com/posit-dev/shinylive\n\n---\n\n**Bottom Line**: Use Shinylive. It's perfect for classroom tools.\n","type":"text"},{"name":"SHINYLIVE_DEPLOYMENT.md","content":"# Deploy as Shinylive - BEST Solution for Classroom Use! 🎯\n\n## Why Shinylive is Perfect for Your Classroom\n\n### Advantages:\n✅ **NO SERVER CRASHES** - Runs entirely in each student's browser\n✅ **FREE** - No hosting costs, unlimited concurrent users\n✅ **ZERO CONFIGURATION** - No server management needed\n✅ **FAST LOADING** - Once loaded, everything is instant\n✅ **WORKS OFFLINE** - After initial load, students can use it without internet\n✅ **COMPLETE ISOLATION** - Each student's data stays in their browser\n✅ **NO USAGE LIMITS** - Unlimited hours, unlimited students\n\n### Disadvantages:\n❌ Initial load time (10-30 seconds) - one-time per session\n❌ Limited to browser memory (usually 4-8 GB, more than enough for your use case)\n❌ Requires modern browser (Chrome, Firefox, Edge, Safari)\n\n## How to Deploy Your App as Shinylive\n\n### Step 1: Install Shinylive\n\nOpen RStudio and run:\n\n```r\n# Install shinylive package\ninstall.packages(\"shinylive\")\n\n# Install httpuv for local testing\ninstall.packages(\"httpuv\")\n```\n\n### Step 2: Prepare Your App\n\nYour app is already compatible! The comment in line 2 says \"Shinylive\" so you were planning this already.\n\n```r\n# Navigate to your app directory\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\n\n# Verify app.R exists\nfile.exists(\"app.R\")  # Should return TRUE\n```\n\n### Step 3: Export to Shinylive\n\n```r\nlibrary(shinylive)\n\n# Create shinylive export\nshinylive::export(\n  appdir = \".\",  # Current directory with app.R\n  destdir = \"shinylive_export\"  # Output directory\n)\n```\n\nThis creates a `shinylive_export` folder with all necessary files.\n\n### Step 4: Deploy to GitHub Pages (FREE Hosting)\n\n#### Option A: Using GitHub Desktop (Easiest)\n\n1. **Create GitHub Account** (if you don't have one):\n   - Go to https://github.com\n   - Sign up for free\n\n2. **Install GitHub Desktop**:\n   - Download from https://desktop.github.com\n   - Install and sign in\n\n3. **Create New Repository**:\n   - Open GitHub Desktop\n   - Click \"Create New Repository\"\n   - Name: `m450-data-tool`\n   - Local Path: Select a folder\n   - Click \"Create Repository\"\n\n4. **Copy Shinylive Files**:\n   - Copy everything from `shinylive_export` folder\n   - Paste into your repository folder\n\n5. **Publish to GitHub**:\n   - In GitHub Desktop, you'll see all files listed\n   - Add a commit message: \"Initial Shinylive deployment\"\n   - Click \"Commit to main\"\n   - Click \"Publish repository\"\n   - Make sure \"Keep this code private\" is UNCHECKED (must be public for GitHub Pages)\n\n6. **Enable GitHub Pages**:\n   - Go to your repository on GitHub.com\n   - Click \"Settings\" tab\n   - Scroll to \"Pages\" in left sidebar\n   - Under \"Source\", select \"main\" branch\n   - Click \"Save\"\n   - Wait 2-3 minutes\n\n7. **Get Your App URL**:\n   - Your app will be at: `https://YOUR-USERNAME.github.io/m450-data-tool/`\n   - Share this URL with your students!\n\n#### Option B: Using Git Command Line\n\n```bash\n# In your terminal/Git Bash\ncd \"C:/Users/shaikmu/Dropbox/Claude\"\n\n# Create a new folder for deployment\nmkdir m450-shinylive-deploy\ncd m450-shinylive-deploy\n\n# Copy shinylive export\ncp -r \"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool/shinylive_export/\"* .\n\n# Initialize git\ngit init\ngit add .\ngit commit -m \"Initial Shinylive deployment\"\n\n# Create GitHub repo and push\n# (First create repo on GitHub.com)\ngit remote add origin https://github.com/YOUR-USERNAME/m450-data-tool.git\ngit branch -M main\ngit push -u origin main\n\n# Enable GitHub Pages in repository settings\n```\n\n### Step 5: Alternative FREE Hosting Options\n\nIf GitHub Pages doesn't work for you:\n\n#### A. Netlify (Easiest Drag-and-Drop)\n1. Go to https://www.netlify.com\n2. Sign up for free\n3. Drag your `shinylive_export` folder to the deploy area\n4. Get instant URL like `https://your-app-name.netlify.app`\n\n#### B. Posit Cloud\n1. Go to https://posit.cloud\n2. Free tier includes public apps\n3. Upload your app\n4. Export to Shinylive format\n5. Share public link\n\n#### C. Your Own Web Server\n- Copy `shinylive_export` folder to any web server\n- Access via `https://yourserver.com/path/to/shinylive_export/`\n\n## Testing Your Shinylive App\n\n### Local Testing First\n\nBefore deploying, test locally:\n\n```r\nlibrary(shinylive)\n\n# Run shinylive app locally\nshinylive::run_shinylive(\n  appdir = \"shinylive_export\"\n)\n```\n\nThis opens the app in your browser. Test all features:\n- Upload CSV\n- Run analyses\n- Check all modules work\n\n### Browser Compatibility\n\nTest in multiple browsers:\n- ✅ Chrome (Recommended)\n- ✅ Firefox\n- ✅ Edge\n- ✅ Safari\n- ❌ Internet Explorer (not supported)\n\n## Student Instructions\n\nShare these instructions with your class:\n\n---\n\n### How to Use the M450 Data Analysis Tool\n\n1. **Open the app**: Go to [YOUR-URL-HERE]\n\n2. **Wait for initial load**: First time will take 15-30 seconds (loading R packages)\n\n3. **Upload your data**: Click \"Upload Dataset (CSV)\" on the home page\n\n4. **Use the tools**: Navigate through the sidebar to access different analyses\n\n5. **Your data is private**: Everything runs in YOUR browser, data never leaves your computer\n\n6. **Refresh to reset**: If something breaks, just refresh the page\n\n7. **Works offline**: After first load, you can even use it without internet!\n\n8. **Browser requirements**:\n   - Use Chrome, Firefox, Edge, or Safari\n   - Make sure JavaScript is enabled\n   - Disable browser extensions if you have issues\n\n---\n\n## Troubleshooting\n\n### \"Application loading...\" never finishes\n- **Cause**: Slow internet or browser extension blocking\n- **Fix**:\n  - Disable ad blockers\n  - Try different browser\n  - Clear browser cache\n  - Check browser console for errors (F12)\n\n### \"Out of memory\" error\n- **Cause**: Dataset too large for browser memory\n- **Fix**:\n  - Upload smaller dataset (< 50,000 rows recommended)\n  - Close other browser tabs\n  - Use 64-bit browser\n\n### Features not working\n- **Cause**: Package compatibility issues\n- **Fix**:\n  - Check browser console (F12) for error messages\n  - Verify all dependencies are included in shinylive export\n\n## Updating Your App\n\nWhen you need to make changes:\n\n```r\n# 1. Edit app.R\n# 2. Re-export to shinylive\nlibrary(shinylive)\nshinylive::export(\".\", \"shinylive_export\")\n\n# 3. Copy new files to your GitHub repo\n# 4. Commit and push changes\n\n# In GitHub Desktop:\n# - Add commit message: \"Update app with fixes\"\n# - Click \"Commit to main\"\n# - Click \"Push origin\"\n\n# Changes will be live in 1-2 minutes!\n```\n\n## Performance Tips\n\n### For Large Classes (100+ students):\n\n1. **Host on multiple platforms**:\n   - GitHub Pages\n   - Netlify\n   - Your university server\n   - Give students 2-3 backup URLs\n\n2. **Pre-load in class**:\n   - Have students open the URL 5 minutes before class\n   - Let it load while you introduce the lesson\n\n3. **Provide offline version**:\n   - Students can save the webpage (Ctrl+S)\n   - Works without internet after saving\n\n### For Faster Loading:\n\nThe initial load can be optimized:\n\n```r\n# In app.R, add at the top:\noptions(repos = c(CRAN = \"https://cloud.r-project.org\"))\n\n# Only load packages when needed\n# Instead of library() at top, use require() in specific modules\n```\n\n## Advanced: Custom Domain\n\nIf you want a custom URL like `data.yourschool.edu`:\n\n1. **Register domain** (optional, costs $10-15/year)\n\n2. **Configure DNS**:\n   - Add CNAME record pointing to GitHub Pages\n   - Details: https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site\n\n3. **Update GitHub Pages settings**:\n   - Enter your custom domain\n   - Enable HTTPS\n\n## Comparison: Shinylive vs Shinyapps.io\n\n| Feature | Shinylive | Shinyapps.io |\n|---------|-----------|--------------|\n| **Cost** | FREE | Free tier limited, $9-99/mo for classroom |\n| **Concurrent Users** | UNLIMITED | Limited (5-25 on free) |\n| **Crashes** | Never (client-side) | Common on free tier |\n| **Setup Difficulty** | Medium | Easy |\n| **Load Time** | 15-30 sec first load | 2-5 sec |\n| **Data Privacy** | Perfect (stays in browser) | Uploads to server |\n| **Maintenance** | Zero | Server monitoring |\n| **Best For** | Classrooms, public tools | Private apps, databases |\n\n## Why Shinylive Solves Your Crashes\n\nYour original problem: \"crashes when multiple students use it\"\n\n**Root cause**: Shinyapps.io free tier has:\n- Only 25 active hours/month total\n- 1 GB RAM shared across ALL users\n- Limited concurrent connections\n\n**Shinylive solution**:\n- Each student's browser runs the app independently\n- No shared server resources\n- No usage limits\n- No crashes from concurrent usage\n\nIt's like giving each student their own personal R installation instead of sharing one computer!\n\n## Next Steps\n\n1. ✅ **Install shinylive package**\n2. ✅ **Export your app**: `shinylive::export(\".\", \"shinylive_export\")`\n3. ✅ **Test locally**: `shinylive::run_shinylive(\"shinylive_export\")`\n4. ✅ **Deploy to GitHub Pages** (or Netlify)\n5. ✅ **Share URL with students**\n6. ✅ **Celebrate no more crashes!** 🎉\n\n## Getting Help\n\nIf you run into issues:\n\n1. **Shinylive Documentation**: https://shiny.posit.co/py/docs/shinylive.html\n2. **GitHub Pages Guide**: https://pages.github.com\n3. **RStudio Community**: https://community.rstudio.com/tag/shinylive\n\n---\n\n**Recommendation**: **Use Shinylive!** It's the perfect solution for classroom tools where multiple students need simultaneous access without any server infrastructure.\n\n**Time to deploy**: 15-30 minutes\n**Cost**: $0\n**Maintenance**: None\n**Reliability**: 100% (no server to crash)\n","type":"text"},{"name":"app_shinylive.R","content":"##############################################\n# M450 Data Analysis Tool - Shinylive Version\n# This version is optimized for browser-based deployment\n##############################################\n\nlibrary(shiny)\nlibrary(DT)\nlibrary(broom)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(rlang)\n\n# ==============================================================================\n# HELPER FUNCTIONS\n# ==============================================================================\n\n# Custom Skewness function\nskewness <- function(x, na.rm = FALSE) {\n  if (na.rm) x <- x[!is.na(x)]\n  n <- length(x)\n  if (n < 3) return(NA)\n  x <- x - mean(x)\n  y <- sqrt(mean(x^2))\n  sum(x^3) / (n * y^3)\n}\n\n# Custom Kurtosis function\nkurtosis <- function(x, na.rm = FALSE) {\n  if (na.rm) x <- x[!is.na(x)]\n  n <- length(x)\n  if (n < 4) return(NA)\n  x <- x - mean(x)\n  y <- mean(x^2)\n  (sum(x^4) / (n * y^2)) - 3\n}\n\n# DT Options Helper\nget_dt_options <- function(scrollX = TRUE, dom = \"lBfrtip\", pageLength = 5) {\n  list(\n    scrollX = scrollX,\n    dom = dom,\n    pageLength = pageLength,\n    lengthMenu = list(\n      c(5, 10, 15, 25, 50, -1),\n      c(\"5\", \"10\", \"15\", \"25\", \"50\", \"All\")\n    ),\n    buttons = list(\n      list(\n        extend = \"copy\",\n        text = \"Copy\",\n        exportOptions = list(modifier = list(page = \"all\"))\n      ),\n      list(\n        extend = \"csv\",\n        text = \"CSV\",\n        exportOptions = list(modifier = list(page = \"all\"))\n      )\n    )\n  )\n}\n\n# ==============================================================================\n# MODULE: DATA FILTERING\n# ==============================================================================\n\nfilter_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Filter Data\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"filter_var_selector\")),\n        selectInput(ns(\"filter_op\"), \"Operator\",\n                    choices = c(\"Equals (==)\" = \"==\",\n                                \"Not Equals (!=)\" = \"!=\",\n                                \"Greater Than (>)\" = \">\",\n                                \"Less Than (<)\" = \"<\",\n                                \"Greater/Equal (>=)\" = \">=\",\n                                \"Less/Equal (<=)\" = \"<=\")),\n        textInput(ns(\"filter_val\"), \"Value (Enter number or text)\"),\n        actionButton(ns(\"apply_filter\"), \"Apply Filter\", class = \"btn-danger w-100\"),\n        hr(),\n        actionButton(ns(\"reset_data\"), \"Reset to Original Data\", class = \"btn-secondary w-100\")\n      ),\n      h5(\"Current Data Preview (First 10 Rows)\"),\n      p(class=\"text-muted\", \"Note: Filtering modifies the dataset used in all modules.\"),\n      DTOutput(ns(\"filter_preview\"))\n    )\n  )\n}\n\nfilter_server <- function(id, data_reactive, original_data_reactive, update_data_function) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$filter_var_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"filter_var\"), \"Select Variable to Filter\", choices = names(data_reactive()))\n    })\n\n    output$filter_preview <- renderDT({\n      req(data_reactive())\n      datatable(head(data_reactive(), 10),\n                extensions = \"Buttons\",\n                options = get_dt_options(dom = \"lBfrtip\"))\n    })\n\n    # APPLY FILTER\n    observeEvent(input$apply_filter, {\n      req(data_reactive(), input$filter_var, input$filter_op, input$filter_val)\n      df <- data_reactive()\n      var <- input$filter_var\n      op <- input$filter_op\n      val <- input$filter_val\n\n      tryCatch({\n        if (is.numeric(df[[var]])) {\n          val_numeric <- as.numeric(val)\n          if (is.na(val_numeric)) stop(\"Please enter a numeric value for this variable.\")\n          expr <- paste0(\"`\", var, \"` \", op, \" \", val_numeric)\n        } else {\n          if (op %in% c(\">\", \"<\", \">=\", \"<=\")) stop(\"Cannot use inequalities on text data.\")\n          expr <- paste0(\"`\", var, \"` \", op, \" '\", val, \"'\")\n        }\n\n        filtered_df <- df %>% dplyr::filter(eval(parse(text = expr)))\n\n        if (nrow(filtered_df) == 0) {\n          showNotification(\"Filter resulted in 0 rows! Operation cancelled.\", type = \"warning\")\n        } else {\n          update_data_function(filtered_df)\n          showNotification(paste(\"Filter applied. Remaining rows:\", nrow(filtered_df)), type = \"message\")\n        }\n      }, error = function(e) {\n        showNotification(paste(\"Filter Error:\", e$message), type = \"error\")\n      })\n    })\n\n    # RESET DATA\n    observeEvent(input$reset_data, {\n      req(original_data_reactive())\n      update_data_function(original_data_reactive())\n      showNotification(\"Data reset to original uploaded file.\", type = \"message\")\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: DATA TRANSFORMATION\n# ==============================================================================\n\ntransform_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Data Transformation\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"var_selector\")),\n        selectInput(ns(\"method\"), \"Transformation Method\",\n                    choices = c(\"Log (ln)\" = \"log\",\n                                \"Square Root\" = \"sqrt\",\n                                \"Square (x^2)\" = \"square\",\n                                \"Standardize (Z-score)\" = \"scale\",\n                                \"Convert to Factor\" = \"factor\",\n                                \"Change Base Level (Relevel)\" = \"relevel\",\n                                \"Create Interaction (*)\" = \"interaction\")),\n\n        uiOutput(ns(\"var2_selector\")),\n        uiOutput(ns(\"level_selector\")),\n\n        actionButton(ns(\"apply\"), \"Apply Transformation\", class = \"btn-warning w-100\")\n      ),\n      h5(\"Data Preview (First 10 Rows)\"),\n      DTOutput(ns(\"preview_table\"))\n    )\n  )\n}\n\ntransform_server <- function(id, data_reactive, update_data_function) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$var_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"var\"), \"Select Variable\", choices = names(data_reactive()))\n    })\n\n    output$var2_selector <- renderUI({\n      req(input$method)\n      if (input$method == \"interaction\") {\n        req(data_reactive())\n        selectInput(ns(\"var2\"), \"Select Second Variable (Interaction)\", choices = names(data_reactive()))\n      } else {\n        NULL\n      }\n    })\n\n    output$level_selector <- renderUI({\n      req(input$method, input$var, data_reactive())\n      if (input$method == \"relevel\") {\n        df <- data_reactive()\n        col <- input$var\n\n        if (is.factor(df[[col]])) {\n          lvls <- levels(df[[col]])\n        } else {\n          lvls <- sort(unique(df[[col]]))\n        }\n\n        selectInput(ns(\"ref_level\"), \"Select New Reference Level\", choices = lvls)\n      } else {\n        NULL\n      }\n    })\n\n    output$preview_table <- renderDT({\n      req(data_reactive())\n      datatable(head(data_reactive(), 10),\n                extensions = \"Buttons\",\n                options = get_dt_options(dom = \"lBfrtip\"))\n    })\n\n    observeEvent(input$apply, {\n      req(data_reactive(), input$var)\n      df <- data_reactive()\n      col <- input$var\n      method <- input$method\n\n      tryCatch({\n        if (method == \"interaction\") {\n          req(input$var2)\n          col2 <- input$var2\n          if (!is.numeric(df[[col]]) || !is.numeric(df[[col2]]))\n            stop(\"Interaction requires both variables to be numeric.\")\n\n          new_col_name <- paste0(col, \"_x_\", col2)\n          df[[new_col_name]] <- df[[col]] * df[[col2]]\n          showNotification(paste(\"Created variable:\", new_col_name), type = \"message\")\n\n        } else if (method == \"relevel\") {\n          req(input$ref_level)\n\n          if (!is.factor(df[[col]])) {\n            df[[col]] <- as.factor(df[[col]])\n          }\n\n          df[[col]] <- relevel(df[[col]], ref = input$ref_level)\n          showNotification(paste(\"Variable\", col, \"releveled. Base case:\", input$ref_level), type = \"message\")\n\n        } else {\n          new_col_name <- paste0(col, \"_\", method)\n\n          if (method == \"log\") {\n            if (!is.numeric(df[[col]])) stop(\"Log requires numeric data.\")\n            df[[new_col_name]] <- log(df[[col]] + 1e-6)\n          } else if (method == \"sqrt\") {\n            if (!is.numeric(df[[col]])) stop(\"Sqrt requires numeric data.\")\n            df[[new_col_name]] <- sqrt(df[[col]])\n          } else if (method == \"square\") {\n            if (!is.numeric(df[[col]])) stop(\"Square requires numeric data.\")\n            df[[new_col_name]] <- df[[col]]^2\n          } else if (method == \"scale\") {\n            if (!is.numeric(df[[col]])) stop(\"Scale requires numeric data.\")\n            df[[new_col_name]] <- as.vector(scale(df[[col]]))\n          } else if (method == \"factor\") {\n            df[[col]] <- as.factor(df[[col]])\n            showNotification(paste(\"Converted\", col, \"to factor.\"), type = \"message\")\n            update_data_function(df)\n            return()\n          }\n\n          showNotification(paste(\"Created variable:\", new_col_name), type = \"message\")\n        }\n\n        update_data_function(df)\n\n      }, error = function(e) {\n        showNotification(paste(\"Error:\", e$message), type = \"error\")\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: SUMMARY STATS & DISTRIBUTIONS\n# ==============================================================================\n\nsummary_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Summary Statistics & Distributions\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"var_selector\")),\n        uiOutput(ns(\"group_selector\")),\n        checkboxGroupInput(ns(\"stats\"), \"Numeric Stats\",\n                           choices = c(\"N\", \"Mean\", \"SD\", \"Min\", \"Max\",\n                                       \"Median\", \"Skewness\", \"Kurtosis\"),\n                           selected = c(\"N\", \"Mean\", \"SD\", \"Min\", \"Max\"))\n      ),\n      card(\n        card_header(\"Output\"),\n        uiOutput(ns(\"dynamic_content\"))\n      )\n    )\n  )\n}\n\nsummary_server <- function(id, data_reactive) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$var_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"vars\"), \"Select Variables\",\n                     choices = names(data_reactive()), multiple = TRUE)\n    })\n\n    output$group_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"group_var\"), \"Group By (Optional)\",\n                     choices = c(\"None\" = \"\", names(data_reactive())),\n                     multiple = FALSE)\n    })\n\n    output$dynamic_content <- renderUI({\n      req(data_reactive(), input$vars)\n      df <- data_reactive()\n      selected_vars <- input$vars\n\n      num_vars <- names(df)[sapply(df, is.numeric)]\n      selected_num <- intersect(selected_vars, num_vars)\n      selected_cat <- setdiff(selected_vars, num_vars)\n\n      ui_list <- list()\n\n      if (length(selected_num) > 0) {\n        ui_list[[length(ui_list) + 1]] <- h5(\"Numeric Summary Statistics\")\n        ui_list[[length(ui_list) + 1]] <- DTOutput(ns(\"stats_table\"))\n      }\n\n      if (length(selected_cat) > 0) {\n        if (length(ui_list) > 0) ui_list[[length(ui_list) + 1]] <- hr()\n        ui_list[[length(ui_list) + 1]] <- h5(\"Categorical Distributions\")\n        for (v in selected_cat) {\n          ui_list[[length(ui_list) + 1]] <- h6(paste(\"Distribution:\", v))\n          ui_list[[length(ui_list) + 1]] <- plotOutput(ns(paste0(\"plot_\", v)))\n          ui_list[[length(ui_list) + 1]] <- br()\n        }\n      }\n\n      tagList(ui_list)\n    })\n\n    output$stats_table <- renderDT({\n      req(data_reactive(), input$vars)\n      df <- data_reactive()\n      group_var <- input$group_var\n      if (is.null(group_var) || group_var == \"\") group_var <- NULL\n\n      num_vars <- names(df)[sapply(df, is.numeric)]\n      selected_num <- intersect(input$vars, num_vars)\n      if (length(selected_num) == 0) return(NULL)\n\n      if (!is.null(group_var)) {\n        df_long <- df %>%\n          select(all_of(c(group_var, selected_num))) %>%\n          pivot_longer(cols = all_of(selected_num),\n                       names_to = \"Variable\", values_to = \"Value\") %>%\n          group_by(across(all_of(c(group_var, \"Variable\"))))\n\n        res <- df_long %>%\n          summarise(\n            N = if (\"N\" %in% input$stats) sum(!is.na(Value)) else NULL,\n            Mean = if (\"Mean\" %in% input$stats) mean(Value, na.rm = TRUE) else NULL,\n            SD = if (\"SD\" %in% input$stats) sd(Value, na.rm = TRUE) else NULL,\n            Min = if (\"Min\" %in% input$stats) min(Value, na.rm = TRUE) else NULL,\n            Max = if (\"Max\" %in% input$stats) max(Value, na.rm = TRUE) else NULL,\n            Median = if (\"Median\" %in% input$stats) median(Value, na.rm = TRUE) else NULL,\n            Skewness = if (\"Skewness\" %in% input$stats) skewness(Value, na.rm = TRUE) else NULL,\n            Kurtosis = if (\"Kurtosis\" %in% input$stats) kurtosis(Value, na.rm = TRUE) else NULL,\n            .groups = \"drop\"\n          ) %>%\n          mutate(across(where(is.numeric), ~ round(., 3)))\n\n        datatable(res, extensions = \"Buttons\", options = get_dt_options(dom = \"lBfrtip\"))\n      } else {\n        df_long <- df %>%\n          select(all_of(selected_num)) %>%\n          pivot_longer(cols = everything(),\n                       names_to = \"Variable\", values_to = \"Value\") %>%\n          group_by(Variable)\n\n        res <- df_long %>%\n          summarise(\n            N = if (\"N\" %in% input$stats) sum(!is.na(Value)) else NULL,\n            Mean = if (\"Mean\" %in% input$stats) mean(Value, na.rm = TRUE) else NULL,\n            SD = if (\"SD\" %in% input$stats) sd(Value, na.rm = TRUE) else NULL,\n            Min = if (\"Min\" %in% input$stats) min(Value, na.rm = TRUE) else NULL,\n            Max = if (\"Max\" %in% input$stats) max(Value, na.rm = TRUE) else NULL,\n            Median = if (\"Median\" %in% input$stats) median(Value, na.rm = TRUE) else NULL,\n            Skewness = if (\"Skewness\" %in% input$stats) skewness(Value, na.rm = TRUE) else NULL,\n            Kurtosis = if (\"Kurtosis\" %in% input$stats) kurtosis(Value, na.rm = TRUE) else NULL\n          ) %>%\n          mutate(across(where(is.numeric), ~ round(., 3)))\n\n        datatable(res, extensions = \"Buttons\", options = get_dt_options(dom = \"lBfrtip\"))\n      }\n    })\n\n    # Categorical plots\n    observe({\n      req(data_reactive(), input$vars)\n      df <- data_reactive()\n      cat_vars <- names(df)[!sapply(df, is.numeric)]\n      selected_cat <- intersect(input$vars, cat_vars)\n      group_var <- input$group_var\n      if (!is.null(group_var) && group_var == \"\") group_var <- NULL\n\n      for (v in selected_cat) {\n        local({\n          my_v <- v\n          output[[paste0(\"plot_\", my_v)]] <- renderPlot({\n            p <- ggplot(df, aes_string(x = paste0(\"`\", my_v, \"`\")))\n\n            if (!is.null(group_var)) {\n              p <- p +\n                geom_bar(aes_string(fill = paste0(\"`\", group_var, \"`\")),\n                         position = \"dodge\", color = \"black\") +\n                geom_text(stat = \"count\",\n                          aes(label = after_stat(count),\n                              group = !!sym(group_var)),\n                          position = position_dodge(width = 0.9),\n                          vjust = -0.5) +\n                labs(fill = group_var)\n            } else {\n              p <- p +\n                geom_bar(fill = \"#990000\", color = \"black\") +\n                geom_text(stat = \"count\", aes(label = after_stat(count)), vjust = -0.5)\n            }\n\n            p +\n              theme_minimal() +\n              labs(y = \"Count\", title = NULL) +\n              theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n              scale_y_continuous(expand = expansion(mult = c(0, 0.15)))\n          })\n        })\n      }\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: CORRELATION (NUMERIC TABLE)\n# ==============================================================================\n\ncorr_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Correlation Analysis (Numeric Table)\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"num_var_selector\")),\n        actionButton(ns(\"run_corr\"), \"Calculate Correlations\", class = \"btn-primary w-100\")\n      ),\n      DTOutput(ns(\"corr_table\"))\n    )\n  )\n}\n\ncorr_server <- function(id, data_reactive) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$num_var_selector <- renderUI({\n      req(data_reactive())\n      num_vars <- names(data_reactive())[sapply(data_reactive(), is.numeric)]\n      selectizeInput(ns(\"vars\"), \"Select Numeric Variables\",\n                     choices = num_vars, multiple = TRUE, selected = NULL)\n    })\n\n    observeEvent(input$run_corr, {\n      req(data_reactive(), input$vars)\n      df_num <- data_reactive()[, input$vars, drop = FALSE]\n\n      M <- cor(df_num, use = \"complete.obs\")\n      M_rounded <- round(M, 3)\n\n      output$corr_table <- renderDT({\n        datatable(M_rounded, extensions = \"Buttons\",\n                  options = get_dt_options(dom = \"lBfrtip\")) %>%\n          formatStyle(columns = colnames(M_rounded),\n                      backgroundColor = styleInterval(\n                        c(-0.5, 0.5),\n                        c(\"#f8d7da\", \"#ffffff\", \"#d4edda\")\n                      ))\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: CLUSTER ANALYSIS (K-MEANS)\n# ==============================================================================\n\ncluster_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Cluster Analysis (K-Means)\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"col_selector\")),\n        actionButton(ns(\"run_diagnostics\"), \"Generate Diagnostics (Elbow/Dendrogram)\",\n                     class = \"btn-info w-100 mb-3\", icon = icon(\"chart-area\")),\n        hr(),\n        numericInput(ns(\"k\"), \"Number of Clusters (k)\", value = 2, min = 1),\n        actionButton(ns(\"run_cluster\"), \"Run Clustering & Save\",\n                     class = \"btn-success w-100\", icon = icon(\"save\")),\n        p(class=\"text-muted small mt-2\",\n          \"Note: 'Run Clustering' will add a 'Cluster_Membership' variable to your dataset.\")\n      ),\n      navset_card_tab(\n        nav_panel(\"Elbow Plot\", plotOutput(ns(\"elbow_plot\"))),\n        nav_panel(\"Dendrogram\", plotOutput(ns(\"dendrogram\"))),\n        nav_panel(\"Cluster Summary\", DTOutput(ns(\"cluster_summary\")))\n      )\n    )\n  )\n}\n\ncluster_server <- function(id, data_reactive, update_data_function) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    output$col_selector <- renderUI({\n      req(data_reactive())\n      num_vars <- names(data_reactive())[sapply(data_reactive(), is.numeric)]\n      checkboxGroupInput(ns(\"cols\"), \"Select Variables for Clustering\",\n                         choices = num_vars, selected = NULL)\n    })\n\n    clean_data <- reactive({\n      req(data_reactive(), input$cols)\n      data_reactive()[, input$cols, drop = FALSE] %>% na.omit()\n    })\n\n    scaled_data <- reactive({\n      req(clean_data())\n      scale(clean_data())\n    })\n\n    observeEvent(input$run_diagnostics, {\n      req(scaled_data())\n\n      output$elbow_plot <- renderPlot({\n        data_for_k <- scaled_data()\n        max_k <- min(10, nrow(data_for_k) - 1)\n        if (max_k < 2) {\n          plot.new()\n          title(\"Not enough rows for elbow plot\")\n        } else {\n          wss <- sapply(1:max_k, function(k) {\n            kmeans(data_for_k, centers = k, nstart = 10)$tot.withinss\n          })\n          plot(\n            1:max_k, wss, type = \"b\",\n            xlab = \"Number of clusters (k)\",\n            ylab = \"Total within-cluster sum of squares\",\n            main = \"Elbow Method for Choosing k\"\n          )\n        }\n      })\n\n      output$dendrogram <- renderPlot({\n        data_for_tree <- scaled_data()\n\n        # Limit dendrogram computation to prevent memory issues\n        max_rows <- min(100, nrow(data_for_tree))\n\n        if (nrow(data_for_tree) > max_rows) {\n          set.seed(42)\n          data_for_tree <- data_for_tree[sample(1:nrow(data_for_tree), max_rows), ]\n        }\n\n        # Skip dendrogram if still too large\n        if (nrow(data_for_tree) < 2) {\n          plot.new()\n          title(\"Not enough data for dendrogram\")\n          return()\n        }\n\n        dist_matrix <- dist(data_for_tree)\n        hc <- hclust(dist_matrix, method = \"ward.D2\")\n        plot(hc, main = paste0(\"Dendrogram (Sample of \", max_rows, \" rows)\"), xlab = \"\", sub = \"\")\n      })\n\n      output$cluster_summary <- renderDT(NULL)\n    })\n\n    observeEvent(input$run_cluster, {\n      req(clean_data(), input$k)\n\n      # Limit k-means to reasonable cluster count\n      if (input$k > 10) {\n        showNotification(\"Maximum 10 clusters allowed for stability.\", type = \"warning\")\n        return()\n      }\n\n      # Reduce nstart for large datasets to save computation\n      nstart_val <- if (nrow(clean_data()) > 1000) 5 else 10\n\n      set.seed(42)\n      k_res <- kmeans(clean_data(), centers = input$k, nstart = nstart_val)\n\n      current_df <- data_reactive()\n\n      base_name <- \"Cluster_Membership\"\n      new_name <- base_name\n      counter <- 1\n\n      while (new_name %in% names(current_df)) {\n        counter <- counter + 1\n        new_name <- paste0(base_name, \"_\", counter)\n      }\n\n      cluster_vec <- rep(NA, nrow(current_df))\n      used_indices <- which(complete.cases(current_df[, input$cols, drop = FALSE]))\n      cluster_vec[used_indices] <- as.factor(k_res$cluster)\n\n      current_df[[new_name]] <- as.factor(cluster_vec)\n\n      update_data_function(current_df)\n      showNotification(paste(\"Clustering complete! Added variable:\", new_name), type = \"message\")\n\n      segment_means <- round(k_res$centers, 2)\n      colnames(segment_means) <- paste0(\"Mean_\", colnames(segment_means))\n\n      summary_df <- data.frame(\n        Cluster = 1:input$k,\n        Count = k_res$size,\n        Percentage = round((k_res$size / sum(k_res$size)) * 100, 2),\n        segment_means\n      )\n\n      output$cluster_summary <- renderDT({\n        datatable(summary_df, extensions = \"Buttons\", options = get_dt_options(dom = \"lBfrtip\"))\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# MODULE: REGRESSION (LINEAR)\n# ==============================================================================\n\nlinear_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Linear Regression\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"dep_selector\")),\n        uiOutput(ns(\"indep_selector\")),\n        actionButton(ns(\"run\"), \"Run Model\", class = \"btn-primary w-100\"),\n        hr(),\n        downloadButton(ns(\"dl\"), \"Download Results (CSV)\", class = \"w-100\")\n      ),\n      navset_card_tab(\n        nav_panel(\"Output\", DTOutput(ns(\"model_table\"))),\n        nav_panel(\"Stats\", verbatimTextOutput(ns(\"model_stats\")))\n      )\n    )\n  )\n}\n\nlinear_server <- function(id, data_reactive, shared_model) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n    res_store <- reactiveVal()\n\n    output$dep_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"dep\"), \"Dependent Variable\", choices = names(data_reactive()))\n    })\n\n    output$indep_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"indep\"), \"Independent Variables\",\n                     choices = names(data_reactive()), multiple = TRUE)\n    })\n\n    observeEvent(input$run, {\n      req(data_reactive(), input$dep, input$indep)\n      df <- data_reactive()\n      f <- as.formula(paste0(\"`\", input$dep, \"` ~ \",\n                             paste(paste0(\"`\", input$indep, \"`\"), collapse = \"+\")))\n      m <- lm(f, data = df)\n\n      res_table <- tidy(m) %>% mutate(across(where(is.numeric), ~ round(., 3)))\n      res_store(res_table)\n\n      # Store model in shared reactive for prediction tool\n      shared_model(list(\n        model = m,\n        dep = input$dep,\n        indep = input$indep,\n        type = \"linear\"\n      ))\n\n      output$model_table <- renderDT({\n        datatable(res_table, extensions = \"Buttons\",\n                  options = get_dt_options(dom = \"lBfrtip\"))\n      })\n      output$model_stats <- renderPrint({ summary(m) })\n    })\n\n    output$dl <- downloadHandler(\n      filename = \"linear_results.csv\",\n      content = function(file) {\n        write.csv(res_store(), file, row.names = FALSE)\n      }\n    )\n  })\n}\n\n# ==============================================================================\n# MODULE: REGRESSION (LOGISTIC)\n# ==============================================================================\n\nlogistic_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Logistic Regression\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"dep_selector\")),\n        uiOutput(ns(\"indep_selector\")),\n        actionButton(ns(\"run\"), \"Run Model\", class = \"btn-primary w-100\"),\n        hr(),\n        downloadButton(ns(\"dl\"), \"Download Results (CSV)\", class = \"w-100\")\n      ),\n      navset_card_tab(\n        nav_panel(\"Output\", DTOutput(ns(\"model_table\"))),\n        nav_panel(\"Confusion Matrix\", verbatimTextOutput(ns(\"conf_matrix\")))\n      )\n    )\n  )\n}\n\nlogistic_server <- function(id, data_reactive, shared_model) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n    res_store <- reactiveVal()\n\n    output$dep_selector <- renderUI({\n      req(data_reactive())\n      selectInput(ns(\"dep\"), \"Dependent (Binary)\", choices = names(data_reactive()))\n    })\n\n    output$indep_selector <- renderUI({\n      req(data_reactive())\n      selectizeInput(ns(\"indep\"), \"Independent Variables\",\n                     choices = names(data_reactive()), multiple = TRUE)\n    })\n\n    observeEvent(input$run, {\n      req(data_reactive(), input$dep, input$indep)\n      df <- data_reactive()\n      f <- as.formula(paste0(\"`\", input$dep, \"` ~ \",\n                             paste(paste0(\"`\", input$indep, \"`\"), collapse = \"+\")))\n      m <- glm(f, data = df, family = \"binomial\")\n\n      res_table <- tidy(m) %>% mutate(across(where(is.numeric), ~ round(., 3)))\n      res_store(res_table)\n\n      # Store model in shared reactive for prediction tool\n      shared_model(list(\n        model = m,\n        dep = input$dep,\n        indep = input$indep,\n        type = \"logistic\"\n      ))\n\n      output$model_table <- renderDT({\n        datatable(res_table, extensions = \"Buttons\",\n                  options = get_dt_options(dom = \"lBfrtip\"))\n      })\n\n      output$conf_matrix <- renderPrint({\n        preds <- ifelse(predict(m, type = \"response\") > 0.5, 1, 0)\n        actual <- df[[input$dep]]\n        table(Predicted = preds, Actual = actual)\n      })\n    })\n\n    output$dl <- downloadHandler(\n      filename = \"logistic_results.csv\",\n      content = function(file) {\n        write.csv(res_store(), file, row.names = FALSE)\n      }\n    )\n  })\n}\n\n# ==============================================================================\n# MODULE: PREDICTION TOOL\n# ==============================================================================\n\npredict_ui <- function(id) {\n  ns <- NS(id)\n  card(\n    card_header(\"Prediction Tool\"),\n    layout_sidebar(\n      sidebar = sidebar(\n        uiOutput(ns(\"model_status\")),\n        hr(),\n        h5(\"Enter Values for Prediction\"),\n        uiOutput(ns(\"predictor_inputs\")),\n        actionButton(ns(\"predict\"), \"Generate Prediction\", class = \"btn-success w-100 mt-3\")\n      ),\n      h5(\"Model Coefficients\"),\n      DTOutput(ns(\"model_table\")),\n      hr(),\n      h5(\"Prediction Output\"),\n      uiOutput(ns(\"prediction_output\"))\n    )\n  )\n}\n\npredict_server <- function(id, data_reactive, shared_model) {\n  moduleServer(id, function(input, output, session) {\n    ns <- session$ns\n\n    # Display current model status\n    output$model_status <- renderUI({\n      model_info <- shared_model()\n\n      if (is.null(model_info)) {\n        div(class = \"alert alert-warning\",\n            icon(\"exclamation-triangle\"),\n            strong(\" No model loaded\"),\n            p(\"Please run a Linear or Logistic Regression first, then return here to make predictions.\")\n        )\n      } else {\n        model_type_label <- ifelse(model_info$type == \"linear\", \"Linear Regression\", \"Logistic Regression\")\n        div(class = \"alert alert-success\",\n            icon(\"check-circle\"),\n            strong(paste(\" Model Loaded:\", model_type_label)),\n            p(strong(\"Dependent: \"), model_info$dep),\n            p(strong(\"Independent: \"), paste(model_info$indep, collapse = \", \"))\n        )\n      }\n    })\n\n    # Show model coefficients as a table\n    output$model_table <- renderDT({\n      req(shared_model())\n      m <- shared_model()$model\n      res_table <- tidy(m) %>% mutate(across(where(is.numeric), ~ round(., 4)))\n      datatable(res_table, extensions = \"Buttons\",\n                options = get_dt_options(dom = \"lBfrtip\"))\n    })\n\n    # Generate predictor input fields\n    output$predictor_inputs <- renderUI({\n      req(shared_model())\n      vars <- shared_model()$indep\n      df <- data_reactive()\n\n      input_list <- lapply(vars, function(v) {\n        if (is.numeric(df[[v]])) {\n          numericInput(ns(paste0(\"pred_\", v)),\n                       label = v,\n                       value = round(mean(df[[v]], na.rm = TRUE), 2))\n        } else {\n          # For categorical variables, show dropdown with levels\n          levels_v <- if (is.factor(df[[v]])) levels(df[[v]]) else unique(df[[v]])\n          selectInput(ns(paste0(\"pred_\", v)),\n                      label = v,\n                      choices = levels_v)\n        }\n      })\n\n      tagList(input_list)\n    })\n\n    # Single prediction\n    observeEvent(input$predict, {\n      req(shared_model())\n\n      model_info <- shared_model()\n      m <- model_info$model\n      vars <- model_info\n      df <- data_reactive()\n\n      tryCatch({\n        # Build new data frame for prediction\n        new_data <- data.frame(row.names = 1)\n\n        for (v in vars$indep) {\n          input_val <- input[[paste0(\"pred_\", v)]]\n          if (is.numeric(df[[v]])) {\n            new_data[[v]] <- as.numeric(input_val)\n          } else {\n            new_data[[v]] <- input_val\n            if (is.factor(df[[v]])) {\n              new_data[[v]] <- factor(new_data[[v]], levels = levels(df[[v]]))\n            }\n          }\n        }\n\n        # Make prediction\n        if (vars$type == \"linear\") {\n          pred <- predict(m, newdata = new_data, interval = \"confidence\")\n\n          output$prediction_output <- renderUI({\n            tagList(\n              div(class = \"alert alert-success\",\n                  h4(\"Predicted Value\"),\n                  p(strong(paste0(vars$dep, \" = \", round(pred[1, \"fit\"], 4)))),\n                  p(paste0(\"95% Confidence Interval: [\",\n                           round(pred[1, \"lwr\"], 4), \", \",\n                           round(pred[1, \"upr\"], 4), \"]\"))\n              ),\n              h6(\"Input Values Used:\"),\n              tags$ul(\n                lapply(vars$indep, function(v) {\n                  tags$li(paste0(v, \" = \", input[[paste0(\"pred_\", v)]]))\n                })\n              )\n            )\n          })\n\n        } else {\n          # Logistic regression\n          pred_prob <- predict(m, newdata = new_data, type = \"response\")\n          pred_class <- ifelse(pred_prob > 0.5, 1, 0)\n\n          output$prediction_output <- renderUI({\n            tagList(\n              div(class = \"alert alert-info\",\n                  h4(\"Predicted Probability\"),\n                  p(strong(paste0(\"P(\", vars$dep, \" = 1) = \", round(pred_prob, 4)))),\n                  p(paste0(\"Predicted Class (threshold = 0.5): \", pred_class))\n              ),\n              h6(\"Input Values Used:\"),\n              tags$ul(\n                lapply(vars$indep, function(v) {\n                  tags$li(paste0(v, \" = \", input[[paste0(\"pred_\", v)]]))\n                })\n              )\n            )\n          })\n        }\n\n      }, error = function(e) {\n        showNotification(paste(\"Prediction error:\", e$message), type = \"error\")\n      })\n    })\n  })\n}\n\n# ==============================================================================\n# IU BRANDING CSS\n# ==============================================================================\n\n iu_theme_css <- \"\n:root {\n  --iu-crimson: #990000;\n  --iu-cream:   #EDE6D6;\n  --iu-grey:    #7D7D7D;\n  --iu-black:   #000000;\n  --iu-white:   #FFFFFF;\n}\n\n/* NAVBAR / HEADER */\n.navbar {\n  background-color: var(--iu-crimson) !important;\n  border-bottom: 3px solid var(--iu-cream);\n}\n\n.navbar .navbar-brand,\n.navbar span,\n.navbar a {\n  color: var(--iu-white) !important;\n  font-weight: bold;\n  font-size: 1.1rem;\n}\n\n/* SIDEBAR */\n.bslib-sidebar {\n  background-color: var(--iu-cream) !important;\n  padding-top: 1rem;\n  border-right: 3px solid var(--iu-crimson);\n}\n\n.bslib-sidebar ul {\n  padding-left: 0 !important;\n}\n\n.bslib-sidebar a {\n  display: block;\n  padding: 10px 16px;\n  margin-bottom: 6px;\n  border-radius: 6px;\n  font-weight: 600;\n  color: var(--iu-black) !important;\n  text-decoration: none !important;\n  background-color: transparent;\n  transition: all 0.2s ease-in-out;\n}\n\n.bslib-sidebar a i {\n  margin-right: 8px;\n  color: var(--iu-crimson);\n}\n\n/* Hover */\n.bslib-sidebar a:hover {\n  background-color: var(--iu-crimson);\n  color: var(--iu-white) !important;\n}\n\n.bslib-sidebar a:hover i {\n  color: var(--iu-white);\n}\n\n/* Active item */\n.active-sidebar-item {\n  background-color: var(--iu-crimson) !important;\n  color: var(--iu-white) !important;\n}\n\n.active-sidebar-item i {\n  color: var(--iu-white) !important;\n}\n\n/* MOBILE SIDEBAR */\n@media (max-width: 992px) {\n  .bslib-sidebar {\n    position: fixed;\n    top: 56px;\n    left: -260px;\n    width: 240px;\n    height: 100%;\n    background-color: var(--iu-cream) !important;\n    box-shadow: 4px 0px 10px rgba(0,0,0,0.2);\n    transition: left 0.3s ease;\n    z-index: 1050;\n  }\n  .sidebar-open .bslib-sidebar {\n    left: 0;\n  }\n  .mobile-toggle {\n    position: relative;\n    margin-right: 12px;\n    background-color: var(--iu-white);\n    border: 2px solid var(--iu-crimson);\n    border-radius: 6px;\n    padding: 4px 8px;\n    cursor: pointer;\n    font-weight: bold;\n  }\n}\n\"\n\n# ==============================================================================\n# MAIN UI\n# ==============================================================================\n\nui <- page_sidebar(\n  title = div(\n    class = \"d-flex align-items-center\",\n    img(\n      src = \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Indiana_Hoosiers_logo.svg/1280px-Indiana_Hoosiers_logo.svg.png\",\n      height = \"40px\",\n      style = \"margin-right: 15px; background-color: white; padding: 5px; border-radius: 5px;\"\n    ),\n    span(\"M450 Data Analysis Tool (Shinylive)\",\n         style = \"font-weight: bold; font-size: 1.2rem; color: white;\")\n  ),\n\n  theme = bs_theme(\n    version = 5,\n    bg = \"#FFFFFF\",\n    fg = \"#000000\",\n    primary = \"#990000\",\n    secondary = \"#EDE6D6\",\n    base_font = font_google(\"Source Sans Pro\")\n  ),\n\n  tags$head(\n    tags$style(HTML(iu_theme_css)),\n    tags$script(HTML(\"\n      document.addEventListener('DOMContentLoaded', function() {\n        const sidebar = document.querySelector('.bslib-sidebar');\n        if (!sidebar) return;\n        const links = sidebar.querySelectorAll('a');\n        if (links.length > 0) {\n          links[0].classList.add('active-sidebar-item');\n        }\n        links.forEach(link => {\n          link.addEventListener('click', function() {\n            links.forEach(l => l.classList.remove('active-sidebar-item'));\n            this.classList.add('active-sidebar-item');\n          });\n        });\n      });\n    \")),\n    tags$script(HTML(\"\n      document.addEventListener('click', function(e) {\n        if (e.target.closest('.mobile-toggle')) {\n          document.body.classList.toggle('sidebar-open');\n        } else if (e.target.closest('.bslib-sidebar a')) {\n          document.body.classList.remove('sidebar-open');\n        }\n      });\n    \"))\n  ),\n\n  sidebar = sidebar(\n    title = \"Navigation\",\n    tags$ul(\n      class = \"list-unstyled\",\n      tags$li(actionLink(\"go_home\", \"Home / Upload\", icon = icon(\"home\"))),\n      tags$li(actionLink(\"go_filter\", \"Filter Data\", icon = icon(\"filter\"))),\n      tags$li(actionLink(\"go_summary\", \"Summary Stats\", icon = icon(\"chart-bar\"))),\n      tags$li(actionLink(\"go_corr\", \"Correlations\", icon = icon(\"th\"))),\n      tags$li(actionLink(\"go_transform\", \"Data Transformation\", icon = icon(\"magic\"))),\n      tags$li(actionLink(\"go_cluster\", \"Cluster Analysis\", icon = icon(\"object-group\"))),\n      tags$li(actionLink(\"go_linear\", \"Linear Regression\", icon = icon(\"chart-line\"))),\n      tags$li(actionLink(\"go_logistic\", \"Logistic Regression\", icon = icon(\"check-circle\"))),\n      tags$li(actionLink(\"go_predict\", \"Prediction Tool\", icon = icon(\"calculator\")))\n    )\n  ),\n\n  uiOutput(\"page_content\")\n)\n\n# ==============================================================================\n# SERVER\n# ==============================================================================\n\nserver <- function(input, output, session) {\n\n  original_data <- reactiveVal(NULL)\n  shared_model  <- reactiveVal(NULL)\n  global_data   <- reactiveVal(NULL)\n\n  update_data <- function(new_df) {\n    global_data(new_df)\n  }\n\n  current_page <- reactiveVal(\"home\")\n\n  observeEvent(input$go_home,     { current_page(\"home\") })\n  observeEvent(input$go_filter,   { current_page(\"filter\") })\n  observeEvent(input$go_summary,  { current_page(\"summary\") })\n  observeEvent(input$go_corr,     { current_page(\"corr\") })\n  observeEvent(input$go_transform,{ current_page(\"transform\") })\n  observeEvent(input$go_cluster,  { current_page(\"cluster\") })\n  observeEvent(input$go_linear,   { current_page(\"linear\") })\n  observeEvent(input$go_logistic, { current_page(\"logistic\") })\n  observeEvent(input$go_predict,  { current_page(\"predict\") })\n\n  output$page_content <- renderUI({\n    page <- current_page()\n\n    if (page == \"home\") {\n      card(\n        card_header(\"Welcome to M450 Data Analytics (Shinylive Version)\"),\n        div(\n          class = \"alert alert-info\",\n          icon(\"info-circle\"),\n          strong(\" Running in Your Browser\"),\n          p(\"This app runs entirely in your browser. Your data is completely private and never leaves your computer!\")\n        ),\n        p(\"Please upload a CSV dataset below. This data will be available across all modules.\"),\n        fileInput(\"upload_file\", \"Upload Dataset (CSV)\", accept = c(\".csv\")),\n        hr(),\n        h5(\"Current Data Preview:\"),\n        DTOutput(\"home_preview\")\n      )\n    } else if (page == \"filter\") {\n      filter_ui(\"mod_filter\")\n    } else if (page == \"summary\") {\n      summary_ui(\"mod_summary\")\n    } else if (page == \"corr\") {\n      corr_ui(\"mod_corr\")\n    } else if (page == \"transform\") {\n      transform_ui(\"mod_transform\")\n    } else if (page == \"cluster\") {\n      cluster_ui(\"mod_cluster\")\n    } else if (page == \"linear\") {\n      linear_ui(\"mod_linear\")\n    } else if (page == \"logistic\") {\n      logistic_ui(\"mod_logistic\")\n    } else if (page == \"predict\") {\n      predict_ui(\"mod_predict\")\n    }\n  })\n\n  # Upload handler - Shinylive optimized\n  observeEvent(input$upload_file, {\n    req(input$upload_file)\n\n    # File size limit for browser: 5 MB (browsers have memory limits)\n    if (input$upload_file$size > 5 * 1024 * 1024) {\n      showNotification(\"File too large for browser. Please upload a CSV file smaller than 5 MB.\", type = \"error\")\n      return()\n    }\n\n    tryCatch({\n      df <- read.csv(input$upload_file$datapath, check.names = FALSE)\n\n      # Row limit for browser stability\n      if (nrow(df) > 5000) {\n        showNotification(\"Dataset has more than 5,000 rows. Using first 5,000 rows only for browser performance.\", type = \"warning\")\n        df <- df[1:5000, ]\n      }\n\n      original_data(df)\n      global_data(df)\n      showNotification(\"Data uploaded successfully! Running in your browser.\", type = \"message\")\n    }, error = function(e) {\n      showNotification(paste(\"Error reading file:\", e$message), type = \"error\")\n    })\n  })\n\n  output$home_preview <- renderDT({\n    req(global_data())\n    datatable(head(global_data(), 10),\n              extensions = \"Buttons\",\n              options = get_dt_options(dom = \"lBfrtip\"))\n  })\n\n  # Module calls\n  filter_server(\"mod_filter\", global_data, original_data, update_data)\n  summary_server(\"mod_summary\", global_data)\n  corr_server(\"mod_corr\", global_data)\n  transform_server(\"mod_transform\", global_data, update_data)\n  cluster_server(\"mod_cluster\", global_data, update_data)\n  linear_server(\"mod_linear\", global_data, shared_model)\n  logistic_server(\"mod_logistic\", global_data, shared_model)\n  predict_server(\"mod_predict\", global_data, shared_model)\n}\n\nshinyApp(ui, server)\n","type":"text"},{"name":"deploy_shinylive.R","content":"##############################################\n# Shinylive Deployment Script\n# M450 Data Analysis Tool\n##############################################\n\n# Step 1: Install required packages\ncat(\"Installing required packages...\\n\")\nif (!requireNamespace(\"shinylive\", quietly = TRUE)) {\n  install.packages(\"shinylive\")\n}\nif (!requireNamespace(\"httpuv\", quietly = TRUE)) {\n  install.packages(\"httpuv\")\n}\n\nlibrary(shinylive)\n\n# Step 2: Set working directory\ncat(\"\\nSetting working directory...\\n\")\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\n\n# Step 3: Export to Shinylive format\ncat(\"\\nExporting app to Shinylive format...\\n\")\ncat(\"This may take 30-60 seconds...\\n\")\n\nshinylive::export(\n  appdir = \".\",\n  destdir = \"shinylive_export\"\n)\n\ncat(\"\\n✓ Export complete!\\n\")\n\n# Step 4: Test locally\ncat(\"\\nDo you want to test the app locally? (y/n): \")\nanswer <- tolower(readline())\n\nif (answer == \"y\" || answer == \"yes\") {\n  cat(\"\\nStarting local Shinylive server...\\n\")\n  cat(\"The app will open in your browser.\\n\")\n  cat(\"Press Ctrl+C in the console to stop the server when done.\\n\\n\")\n\n  shinylive::run_shinylive(\"shinylive_export\")\n} else {\n  cat(\"\\n\")\n  cat(\"==================================================================\\n\")\n  cat(\"NEXT STEPS:\\n\")\n  cat(\"==================================================================\\n\")\n  cat(\"\\n\")\n  cat(\"1. Your app has been exported to: shinylive_export/\\n\")\n  cat(\"\\n\")\n  cat(\"2. Deploy to GitHub Pages:\\n\")\n  cat(\"   - Create a new repository on GitHub\\n\")\n  cat(\"   - Copy all files from 'shinylive_export' to the repository\\n\")\n  cat(\"   - Push to GitHub\\n\")\n  cat(\"   - Enable GitHub Pages in repository settings\\n\")\n  cat(\"\\n\")\n  cat(\"3. OR Deploy to Netlify (easier):\\n\")\n  cat(\"   - Go to https://www.netlify.com\\n\")\n  cat(\"   - Drag the 'shinylive_export' folder to deploy\\n\")\n  cat(\"   - Get instant URL!\\n\")\n  cat(\"\\n\")\n  cat(\"4. Share the URL with your students\\n\")\n  cat(\"\\n\")\n  cat(\"==================================================================\\n\")\n  cat(\"\\n\")\n  cat(\"See SHINYLIVE_DEPLOYMENT.md for detailed instructions.\\n\")\n  cat(\"\\n\")\n}\n\ncat(\"\\n✓ Done!\\n\")\n","type":"text"},{"name":"manifest.json","content":"{\n  \"version\": 1,\n  \"locale\": \"en_US\",\n  \"metadata\": {\n    \"appmode\": \"shiny\",\n    \"entrypoint\": \"app.R\"\n  },\n  \"r_version\": \"4.3.0\",\n  \"packages\": {\n    \"shiny\": \"1.7.4\",\n    \"DT\": \"0.28\",\n    \"broom\": \"1.0.5\",\n    \"dplyr\": \"1.1.2\",\n    \"tidyr\": \"1.3.0\",\n    \"bslib\": \"0.5.0\",\n    \"ggplot2\": \"3.4.2\",\n    \"rlang\": \"1.1.1\"\n  }\n}\n","type":"text"},{"name":"run_export.R","content":"#!/usr/bin/env Rscript\n\n# Install shinylive if needed\nif (!requireNamespace(\"shinylive\", quietly = TRUE)) {\n  cat(\"Installing shinylive package...\\n\")\n  install.packages(\"shinylive\", repos = \"https://cloud.r-project.org\")\n}\n\n# Load shinylive\nlibrary(shinylive)\n\n# Set working directory\nsetwd(\"C:/Users/shaikmu/Dropbox/Claude/Analysis_Tool\")\n\n# Export app\ncat(\"Exporting app to Shinylive format...\\n\")\ncat(\"This may take 30-60 seconds...\\n\\n\")\n\nshinylive::export(\n  appdir = \".\",\n  destdir = \"shinylive_export\"\n)\n\ncat(\"\\n✓ Export complete!\\n\")\ncat(\"Your Shinylive app is in: shinylive_export/\\n\")\n","type":"text"}]
